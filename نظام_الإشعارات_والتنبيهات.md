# Ù†Ø¸Ø§Ù… Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª ÙˆØ§Ù„ØªÙ†Ø¨ÙŠÙ‡Ø§Øª - Pizza Z

## Ù†Ø¸Ø±Ø© Ø¹Ø§Ù…Ø©

ÙŠØ³ØªØ®Ø¯Ù… Ù…Ø´Ø±ÙˆØ¹ Pizza Z Ù†Ø¸Ø§Ù… Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ù…ØªØ¹Ø¯Ø¯ Ø§Ù„Ù…Ø³ØªÙˆÙŠØ§Øª ÙŠØ´Ù…Ù„:
1. **Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø§Ù„Ù…ØªØµÙØ­ (Browser Notifications)** - Ù„Ù„Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© ÙˆØ§Ù„ØªÙ†Ø¨ÙŠÙ‡Ø§Øª
2. **Ø¥Ø´Ø¹Ø§Ø±Ø§Øª ØµÙˆØªÙŠØ© (Audio Notifications)** - Ø£ØµÙˆØ§Øª ØªÙ†Ø¨ÙŠÙ‡ Ù„Ù„Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© ÙˆØ§Ù„Ù…ØªØ£Ø®Ø±Ø©
3. **Service Worker Push Notifications** - Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø®Ù„ÙÙŠØ© Ø­ØªÙ‰ Ø¹Ù†Ø¯ Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚
4. **Ù†Ø¸Ø§Ù… Ù…Ø±Ø§Ù‚Ø¨Ø© Prometheus + Alertmanager** - Ù„Ù„ØªÙ†Ø¨ÙŠÙ‡Ø§Øª Ø¹Ù„Ù‰ Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ù†Ø¸Ø§Ù… ÙˆØ§Ù„Ø¨Ù†ÙŠØ© Ø§Ù„ØªØ­ØªÙŠØ©

---

## 1. Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø§Ù„Ù…ØªØµÙØ­ (Browser Notifications)

### 1.1 Ø§Ù„Ù…ÙƒÙˆÙ†Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©

#### Ø£) Ø·Ù„Ø¨ Ø§Ù„Ø¥Ø°Ù†
```typescript
// ÙÙŠ WaiterInterface.tsx Ùˆ CashierInterface.tsx
React.useEffect(() => {
  if ('Notification' in window && Notification.permission === 'default') {
    Notification.requestPermission();
  }
}, []);
```

#### Ø¨) Ø¥Ø±Ø³Ø§Ù„ Ø¥Ø´Ø¹Ø§Ø±
```typescript
if ('Notification' in window && Notification.permission === 'granted') {
  new Notification('Ø¨ÙŠØªØ²Ø§ Z - Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯!', {
    body: `ÙŠÙˆØ¬Ø¯ ${currentCount} Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯`,
    icon: '/logo.png',
    badge: '/logo.png',
  });
}
```

### 1.2 Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…Ø©

#### 1.2.1 Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© (WaiterInterface)
- **Ø§Ù„Ù…ÙˆÙ‚Ø¹**: `frontend/src/pages/WaiterInterface.tsx`
- **Ø§Ù„Ø­Ø¯Ø«**: Ø¹Ù†Ø¯ Ø§ÙƒØªØ´Ø§Ù Ø·Ù„Ø¨Ø§Øª Ø¬Ø¯ÙŠØ¯Ø©
- **Ø§Ù„Ù…Ø­ØªÙˆÙ‰**: 
  - Ø§Ù„Ø¹Ù†ÙˆØ§Ù†: "Ø¨ÙŠØªØ²Ø§ Z - Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯!"
  - Ø§Ù„Ù†Øµ: Ø¹Ø¯Ø¯ Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©
  - Ø§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø©: `/logo.png`

```typescript
// ÙƒØ´Ù Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©
React.useEffect(() => {
  if (!allOrders) return;
  
  const prevCount = parseInt(sessionStorage.getItem('waiter_orders_count') || '0');
  const currentCount = allOrders.length;
  
  if (currentCount > prevCount && currentCount > 0) {
    playNotificationSound();
    
    if ('Notification' in window && Notification.permission === 'granted') {
      new Notification('Ø¨ÙŠØªØ²Ø§ Z - Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯!', {
        body: `ÙŠÙˆØ¬Ø¯ ${currentCount} Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯`,
        icon: '/logo.png',
        badge: '/logo.png',
      });
    }
  }
  
  sessionStorage.setItem('waiter_orders_count', currentCount.toString());
}, [allOrders]);
```

#### 1.2.2 Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© (CashierInterface)
- **Ø§Ù„Ù…ÙˆÙ‚Ø¹**: `frontend/src/pages/CashierInterface.tsx`
- **Ø§Ù„Ù…ÙŠØ²Ø§Øª Ø§Ù„Ù…ØªÙ‚Ø¯Ù…Ø©**:
  - ØªØªØ¨Ø¹ Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ù…Ø¹Ø±ÙˆÙØ© Ù„ØªØ¬Ù†Ø¨ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø§Ù„Ù…ÙƒØ±Ø±Ø©
  - Ø¥Ø´Ø¹Ø§Ø± Ù…Ù†ÙØµÙ„ Ù„ÙƒÙ„ Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯
  - Ø§Ø³ØªØ®Ø¯Ø§Ù… `tag` Ù„Ù…Ù†Ø¹ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø§Ù„Ù…ÙƒØ±Ø±Ø©

```typescript
// Ù†Ø¸Ø§Ù… Ù…ØªÙ‚Ø¯Ù… Ù„ØªØªØ¨Ø¹ Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©
const [knownOrderIds, setKnownOrderIds] = useState<Set<number>>(new Set());
const [isInitialLoad, setIsInitialLoad] = useState(true);

React.useEffect(() => {
  if (!orders || orders.length === 0) return;
  
  // Ø§Ù„ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø£ÙˆÙ„ - ÙÙ‚Ø· Ø­ÙØ¸ IDs Ø¨Ø¯ÙˆÙ† Ø¥Ø´Ø¹Ø§Ø±Ø§Øª
  if (isInitialLoad) {
    const currentOrderIds = new Set(orders.map((o: Order) => o.id));
    setKnownOrderIds(currentOrderIds);
    setIsInitialLoad(false);
    return;
  }
  
  // Ø¨Ø¹Ø¯ Ø§Ù„ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø£ÙˆÙ„ - ÙƒØ´Ù Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© ÙØ¹Ù„Ø§Ù‹
  const currentOrderIds = new Set(orders.map((o: Order) => o.id));
  const newOrderIds = new Set<number>();
  
  orders.forEach((order: Order) => {
    if (!knownOrderIds.has(order.id)) {
      newOrderIds.add(order.id);
    }
  });
  
  if (newOrderIds.size > 0) {
    const newOrders = orders.filter((o: Order) => newOrderIds.has(o.id));
    
    playNotificationSound();
    
    if ('Notification' in window && Notification.permission === 'granted') {
      newOrders.forEach((order: Order) => {
        new Notification('ğŸ†• Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯', {
          body: `ØªÙ… Ø§Ø³ØªÙ„Ø§Ù… Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯: ${order.order_number}`,
          icon: '/pizza-icon-192.png',
          badge: '/pizza-icon-96.png',
          tag: `new-order-${order.id}`,
          requireInteraction: false,
        });
      });
    }
    
    setKnownOrderIds(new Set([...knownOrderIds, ...newOrderIds]));
  }
}, [orders, isInitialLoad, knownOrderIds]);
```

#### 1.2.3 Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ù…ØªØ£Ø®Ø±Ø©
- **Ø§Ù„Ù…ÙˆÙ‚Ø¹**: `frontend/src/pages/CashierInterface.tsx`
- **Ø§Ù„Ø´Ø±ÙˆØ·**:
  - Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡ Ø§Ù„Ø£ÙˆÙ„ Ø¹Ù†Ø¯ 15 Ø¯Ù‚ÙŠÙ‚Ø©
  - Ø«Ù… ÙƒÙ„ 5 Ø¯Ù‚Ø§Ø¦Ù‚ Ø¨Ø¹Ø¯ Ø°Ù„Ùƒ (20ØŒ 25ØŒ 30...)
- **Ø§Ù„Ù…Ø­ØªÙˆÙ‰**:
  - Ø§Ù„Ø¹Ù†ÙˆØ§Ù†: "âš ï¸ Ø·Ù„Ø¨ Ù…ØªØ£Ø®Ø±"
  - Ø§Ù„Ù†Øµ: Ø±Ù‚Ù… Ø§Ù„Ø·Ù„Ø¨ ÙˆØ¹Ø¯Ø¯ Ø§Ù„Ø¯Ù‚Ø§Ø¦Ù‚ Ø§Ù„Ù…ØªØ£Ø®Ø±Ø©

```typescript
// Ù…Ø±Ø§Ù‚Ø¨Ø© Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ù…ØªØ£Ø®Ø±Ø©
const [alertedOrders, setAlertedOrders] = useState<{ [key: number]: number }>({});

useEffect(() => {
  const interval = setInterval(() => {
    activeOrders.forEach((order: Order) => {
      if (order.created_at) {
        const timeElapsed = getTimeElapsed(order.created_at);
        
        if (timeElapsed.minutes >= 15) {
          const lastAlertMinute = alertedOrders[order.id] || 0;
          
          // Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡ Ø§Ù„Ø£ÙˆÙ„ Ø¹Ù†Ø¯ Ø§Ù„Ø¯Ù‚ÙŠÙ‚Ø© 15
          // Ø«Ù… ÙƒÙ„ 5 Ø¯Ù‚Ø§Ø¦Ù‚ Ø¨Ø¹Ø¯ Ø°Ù„Ùƒ
          const shouldAlert = 
            (timeElapsed.minutes === 15 && lastAlertMinute < 15) ||
            (timeElapsed.minutes >= 20 && (timeElapsed.minutes - lastAlertMinute) >= 5);
          
          if (shouldAlert) {
            playWarningSound();
            
            if ('Notification' in window && Notification.permission === 'granted') {
              new Notification('âš ï¸ Ø·Ù„Ø¨ Ù…ØªØ£Ø®Ø±', {
                body: `Ø§Ù„Ø·Ù„Ø¨ ${order.order_number} ØªØ£Ø®Ø± ${timeElapsed.minutes} Ø¯Ù‚ÙŠÙ‚Ø©`,
                icon: '/pizza-icon-192.png',
                badge: '/pizza-icon-96.png',
                tag: `order-${order.id}-${timeElapsed.minutes}`,
                requireInteraction: false,
              });
            }
            
            setAlertedOrders((prev) => ({
              ...prev,
              [order.id]: timeElapsed.minutes
            }));
          }
        }
      }
    });
  }, 1000); // ØªØ­Ø¯ÙŠØ« ÙƒÙ„ Ø«Ø§Ù†ÙŠØ©
  
  return () => clearInterval(interval);
}, [orders, getTimeElapsed, playWarningSound, alertedOrders]);
```

---

## 2. Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø§Ù„ØµÙˆØªÙŠØ© (Audio Notifications)

### 2.1 Ø£ØµÙˆØ§Øª Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡ Ø§Ù„Ø¹Ø§Ø¯ÙŠØ©

#### Ø£) ÙÙŠ WaiterInterface
```typescript
const playNotificationSound = () => {
  const audio = new Audio('data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBSuBzvLZiTYIG2m98OScTgwOUKXh8bllHAU2jdXvyXQnBSh+zPDdkEILFFux5uyrVxQJQ5zd8L92IQUqf8zw3I9CCxRasOXrq1cUCkOb3O+/dSEFKn/M8NyPQgsUWrDl66tXFApDm9zvv3UhBSp/zPDcj0ILFFqw5eurVxQKQ5vc779');
  audio.play().catch(() => {});
};
```

#### Ø¨) ÙÙŠ CashierInterface (Web Audio API)
```typescript
const playNotificationSound = useCallback(() => {
  try {
    // Ø¥Ù†Ø´Ø§Ø¡ ØµÙˆØª ØªÙ†Ø¨ÙŠÙ‡ Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Web Audio API
    const audioContext = new (window.AudioContext || (window as any).webkitAudioContext)();
    const oscillator = audioContext.createOscillator();
    const gainNode = audioContext.createGain();
    
    oscillator.connect(gainNode);
    gainNode.connect(audioContext.destination);
    
    oscillator.frequency.value = 800; // ØªØ±Ø¯Ø¯ Ø§Ù„ØµÙˆØª
    oscillator.type = 'sine';
    
    gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
    gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.5);
    
    oscillator.start(audioContext.currentTime);
    oscillator.stop(audioContext.currentTime + 0.5);
  } catch (error) {
    console.warn('ÙØ´Ù„ ØªØ´ØºÙŠÙ„ ØµÙˆØª Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡:', error);
    // Ø·Ø±ÙŠÙ‚Ø© Ø¨Ø¯ÙŠÙ„Ø© Ø¨Ø³ÙŠØ·Ø©
    try {
      const beep = new Audio('data:audio/wav;base64,...');
      beep.volume = 0.3;
      beep.play().catch(() => {});
    } catch (e) {
      console.warn('ÙØ´Ù„ Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡ Ø§Ù„Ø¨Ø¯ÙŠÙ„Ø©');
    }
  }
}, []);
```

### 2.2 Ø£ØµÙˆØ§Øª Ø§Ù„ØªØ­Ø°ÙŠØ± Ù„Ù„Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ù…ØªØ£Ø®Ø±Ø©

```typescript
const playWarningSound = useCallback(() => {
  try {
    // ØµÙˆØª ØªÙ†Ø¨ÙŠÙ‡ Ø£Ù‚ÙˆÙ‰ Ù„Ù„Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ù…ØªØ£Ø®Ø±Ø©
    const audioContext = new (window.AudioContext || (window as any).webkitAudioContext)();
    const oscillator = audioContext.createOscillator();
    const gainNode = audioContext.createGain();
    
    oscillator.connect(gainNode);
    gainNode.connect(audioContext.destination);
    
    oscillator.frequency.value = 600; // ØªØ±Ø¯Ø¯ Ø£Ù‚Ù„
    oscillator.type = 'square'; // ØµÙˆØª Ø£ÙƒØ«Ø± Ø­Ø¯Ø©
    
    gainNode.gain.setValueAtTime(0.5, audioContext.currentTime);
    gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.8);
    
    oscillator.start(audioContext.currentTime);
    oscillator.stop(audioContext.currentTime + 0.8);
  } catch (error) {
    console.warn('ÙØ´Ù„ ØªØ´ØºÙŠÙ„ ØµÙˆØª Ø§Ù„ØªØ­Ø°ÙŠØ±:', error);
    // Ø·Ø±ÙŠÙ‚Ø© Ø¨Ø¯ÙŠÙ„Ø©
  }
}, []);
```

### 2.3 Ø£ØµÙˆØ§Øª Ø§Ù„Ù†Ø¬Ø§Ø­

```typescript
const playSuccessSound = () => {
  const audio = new Audio('data:audio/wav;base64,...');
  audio.play().catch(() => {});
};
```

---

## 3. Service Worker Push Notifications

### 3.1 ØªØ³Ø¬ÙŠÙ„ Service Worker

#### Ø£) Hook Ù…Ø®ØµØµ (useServiceWorker)
**Ø§Ù„Ù…ÙˆÙ‚Ø¹**: `frontend/src/hooks/useServiceWorker.ts`

```typescript
export const useServiceWorker = () => {
  const [isSupported, setIsSupported] = useState(false);
  const [isRegistered, setIsRegistered] = useState(false);
  const [registration, setRegistration] = useState<ServiceWorkerRegistration | null>(null);

  useEffect(() => {
    if ('serviceWorker' in navigator) {
      setIsSupported(true);
      registerServiceWorker();
    }
  }, []);

  const registerServiceWorker = async () => {
    try {
      const registration = await navigator.serviceWorker.register('/sw.js', {
        scope: '/'
      }).catch(() => null);

      if (!registration) {
        setIsRegistered(false);
        return;
      }

      setRegistration(registration);
      setIsRegistered(true);

      // Handle updates
      registration.addEventListener('updatefound', () => {
        const newWorker = registration.installing;
        if (newWorker) {
          newWorker.addEventListener('statechange', () => {
            if (newWorker.state === 'installed' && navigator.serviceWorker.controller) {
              if (confirm('ØªØ­Ø¯ÙŠØ« Ø¬Ø¯ÙŠØ¯ Ù…ØªØ§Ø­! Ù‡Ù„ ØªØ±ÙŠØ¯ Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©ØŸ')) {
                window.location.reload();
              }
            }
          });
        }
      });
    } catch (error) {
      setIsRegistered(false);
    }
  };

  return {
    isSupported,
    isRegistered,
    registration,
    unregisterServiceWorker,
    checkForUpdates
  };
};
```

### 3.2 Service Worker Implementation

**Ø§Ù„Ù…ÙˆÙ‚Ø¹**: `frontend/public/sw.js`

#### Ø£) Ù…Ø¹Ø§Ù„Ø¬ Push Notifications
```javascript
// Push notifications
self.addEventListener('push', (event) => {
  if (event.data) {
    const data = event.data.json();
    const options = {
      body: data.body,
      icon: '/pizza-icon-192.png',
      badge: '/pizza-icon-96.png',
      vibrate: [100, 50, 100],
      data: data.data,
      actions: [
        {
          action: 'view',
          title: 'Ø¹Ø±Ø¶ Ø§Ù„Ø·Ù„Ø¨',
          icon: '/pizza-icon-96.png'
        },
        {
          action: 'close',
          title: 'Ø¥ØºÙ„Ø§Ù‚',
          icon: '/pizza-icon-96.png'
        }
      ]
    };
    
    event.waitUntil(
      self.registration.showNotification(data.title, options)
    );
  }
});
```

#### Ø¨) Ù…Ø¹Ø§Ù„Ø¬ Ø§Ù„Ù†Ù‚Ø± Ø¹Ù„Ù‰ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª
```javascript
// Notification click
self.addEventListener('notificationclick', (event) => {
  event.notification.close();
  
  if (event.action === 'view') {
    event.waitUntil(
      clients.openWindow('/cashier')
    );
  }
});
```

#### Ø¬) Background Sync
```javascript
// Background sync for orders when online
self.addEventListener('sync', (event) => {
  if (event.tag === 'background-sync-orders') {
    console.log('Service Worker: Background sync for orders');
    event.waitUntil(syncOrders());
  }
});

async function syncOrders() {
  try {
    const pendingOrders = await getStoredOrders();
    for (const order of pendingOrders) {
      try {
        await fetch('/api/orders/', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(order)
        });
        await removeStoredOrder(order.id);
      } catch (error) {
        console.error('Failed to sync order:', error);
      }
    }
  } catch (error) {
    console.error('Background sync failed:', error);
  }
}
```

---

## 4. Ù†Ø¸Ø§Ù… Ù…Ø±Ø§Ù‚Ø¨Ø© Prometheus + Alertmanager

### 4.1 Prometheus Configuration

**Ø§Ù„Ù…ÙˆÙ‚Ø¹**: `monitoring/prometheus.yml`

#### Ø£) Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø¹Ø§Ù…Ø©
```yaml
global:
  scrape_interval: 15s
  evaluation_interval: 15s
  external_labels:
    cluster: 'pizza-z-hybrid'
    environment: 'production'

rule_files:
  - "alert_rules.yml"

alerting:
  alertmanagers:
    - static_configs:
        - targets:
          - alertmanager:9093
```

#### Ø¨) Ø£Ù‡Ø¯Ø§Ù Ø§Ù„Ù…Ø±Ø§Ù‚Ø¨Ø©
```yaml
scrape_configs:
  # Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ù‡Ø¬ÙŠÙ† Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ
  - job_name: 'hybrid-system'
    static_configs:
      - targets: ['hybrid-system:3000']
    metrics_path: '/api/metrics'
    scrape_interval: 30s

  # Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
  - job_name: 'postgres-backup'
    static_configs:
      - targets: ['postgres-backup:5432']
    scrape_interval: 60s

  # Redis
  - job_name: 'redis-cache'
    static_configs:
      - targets: ['redis-cache:6379']
    scrape_interval: 30s

  # Nginx
  - job_name: 'nginx-proxy'
    static_configs:
      - targets: ['nginx-proxy:80']
    scrape_interval: 30s
```

### 4.2 Ù‚ÙˆØ§Ø¹Ø¯ Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡ (Alert Rules)

**Ø§Ù„Ù…ÙˆÙ‚Ø¹**: `monitoring/alert_rules.yml`

#### Ø£) ØªÙ†Ø¨ÙŠÙ‡Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ù‡Ø¬ÙŠÙ†
```yaml
groups:
  - name: hybrid-system
    rules:
      # Ø§Ù„Ù†Ø¸Ø§Ù… ØºÙŠØ± Ù…ØªØ§Ø­
      - alert: HybridSystemDown
        expr: up{job="hybrid-system"} == 0
        for: 1m
        labels:
          severity: critical
          service: hybrid-system
        annotations:
          summary: "Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ù‡Ø¬ÙŠÙ† ØºÙŠØ± Ù…ØªØ§Ø­"
          description: "Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ù‡Ø¬ÙŠÙ† Ù„Ù… ÙŠØ³ØªØ¬Ø¨ Ù„Ø£ÙƒØ«Ø± Ù…Ù† Ø¯Ù‚ÙŠÙ‚Ø© ÙˆØ§Ø­Ø¯Ø©"
          runbook_url: "https://docs.pizza-z.com/runbooks/hybrid-system-down"

      # Ø§Ø³ØªØ¬Ø§Ø¨Ø© Ø¨Ø·ÙŠØ¦Ø©
      - alert: HybridSystemSlow
        expr: http_request_duration_seconds{job="hybrid-system",quantile="0.95"} > 2
        for: 5m
        labels:
          severity: warning
          service: hybrid-system
        annotations:
          summary: "Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ù‡Ø¬ÙŠÙ† Ø¨Ø·ÙŠØ¡"
          description: "95% Ù…Ù† Ø§Ù„Ø·Ù„Ø¨Ø§Øª ØªØ³ØªØºØ±Ù‚ Ø£ÙƒØ«Ø± Ù…Ù† 2 Ø«Ø§Ù†ÙŠØ©"

      # Ù…Ø¹Ø¯Ù„ Ø§Ù„Ø£Ø®Ø·Ø§Ø¡ Ù…Ø±ØªÙØ¹
      - alert: HighErrorRate
        expr: rate(http_requests_total{job="hybrid-system",status=~"5.."}[5m]) > 0.1
        for: 5m
        labels:
          severity: critical
          service: hybrid-system
        annotations:
          summary: "Ù…Ø¹Ø¯Ù„ Ø§Ù„Ø£Ø®Ø·Ø§Ø¡ Ù…Ø±ØªÙØ¹"
          description: "Ù…Ø¹Ø¯Ù„ Ø§Ù„Ø£Ø®Ø·Ø§Ø¡ 5xx Ø£Ø¹Ù„Ù‰ Ù…Ù† 10%"

      # Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø°Ø§ÙƒØ±Ø© Ù…Ø±ØªÙØ¹
      - alert: HighMemoryUsage
        expr: (process_resident_memory_bytes{job="hybrid-system"} / 1024 / 1024) > 500
        for: 5m
        labels:
          severity: warning
          service: hybrid-system
        annotations:
          summary: "Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø°Ø§ÙƒØ±Ø© Ù…Ø±ØªÙØ¹"
          description: "Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø°Ø§ÙƒØ±Ø© Ø£Ø¹Ù„Ù‰ Ù…Ù† 500MB"

      # Ø§Ø³ØªØ®Ø¯Ø§Ù… CPU Ù…Ø±ØªÙØ¹
      - alert: HighCPUUsage
        expr: rate(process_cpu_seconds_total{job="hybrid-system"}[5m]) > 0.8
        for: 5m
        labels:
          severity: warning
          service: hybrid-system
        annotations:
          summary: "Ø§Ø³ØªØ®Ø¯Ø§Ù… CPU Ù…Ø±ØªÙØ¹"
          description: "Ø§Ø³ØªØ®Ø¯Ø§Ù… CPU Ø£Ø¹Ù„Ù‰ Ù…Ù† 80%"
```

#### Ø¨) ØªÙ†Ø¨ÙŠÙ‡Ø§Øª Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
```yaml
  - name: database
    rules:
      # Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ØºÙŠØ± Ù…ØªØ§Ø­Ø©
      - alert: DatabaseDown
        expr: up{job="postgres-backup"} == 0
        for: 1m
        labels:
          severity: critical
          service: database
        annotations:
          summary: "Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ØºÙŠØ± Ù…ØªØ§Ø­Ø©"
          description: "Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª PostgreSQL ØºÙŠØ± Ù…ØªØ§Ø­Ø©"

      # Ø§ØªØµØ§Ù„Ø§Øª Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø±ØªÙØ¹Ø©
      - alert: HighDatabaseConnections
        expr: pg_stat_database_numbackends{job="postgres-backup"} > 80
        for: 5m
        labels:
          severity: warning
          service: database
        annotations:
          summary: "Ø§ØªØµØ§Ù„Ø§Øª Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø±ØªÙØ¹Ø©"
          description: "Ø¹Ø¯Ø¯ Ø§Ù„Ø§ØªØµØ§Ù„Ø§Øª Ø§Ù„Ù†Ø´Ø·Ø© Ø£Ø¹Ù„Ù‰ Ù…Ù† 80"
```

#### Ø¬) ØªÙ†Ø¨ÙŠÙ‡Ø§Øª Ø§Ù„Ø£Ø¹Ù…Ø§Ù„
```yaml
  - name: business
    rules:
      # Ù„Ø§ ØªÙˆØ¬Ø¯ Ø·Ù„Ø¨Ø§Øª Ø¬Ø¯ÙŠØ¯Ø©
      - alert: NoNewOrders
        expr: increase(orders_created_total[1h]) == 0
        for: 1h
        labels:
          severity: warning
          service: business
        annotations:
          summary: "Ù„Ø§ ØªÙˆØ¬Ø¯ Ø·Ù„Ø¨Ø§Øª Ø¬Ø¯ÙŠØ¯Ø©"
          description: "Ù„Ù… ÙŠØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø£ÙŠ Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯ Ø®Ù„Ø§Ù„ Ø§Ù„Ø³Ø§Ø¹Ø© Ø§Ù„Ù…Ø§Ø¶ÙŠØ©"

      # Ù…Ø¹Ø¯Ù„ Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ù…Ø±ØªÙØ¹
      - alert: HighOrderCancellationRate
        expr: rate(orders_cancelled_total[1h]) / rate(orders_created_total[1h]) > 0.2
        for: 30m
        labels:
          severity: warning
          service: business
        annotations:
          summary: "Ù…Ø¹Ø¯Ù„ Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ù…Ø±ØªÙØ¹"
          description: "Ù…Ø¹Ø¯Ù„ Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ø£Ø¹Ù„Ù‰ Ù…Ù† 20%"

      # ÙˆÙ‚Øª Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ø·ÙˆÙŠÙ„
      - alert: LongOrderWaitTime
        expr: histogram_quantile(0.95, rate(order_processing_duration_seconds_bucket[5m])) > 1800
        for: 10m
        labels:
          severity: warning
          service: business
        annotations:
          summary: "ÙˆÙ‚Øª Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ø·ÙˆÙŠÙ„"
          description: "95% Ù…Ù† Ø§Ù„Ø·Ù„Ø¨Ø§Øª ØªØ³ØªØºØ±Ù‚ Ø£ÙƒØ«Ø± Ù…Ù† 30 Ø¯Ù‚ÙŠÙ‚Ø©"
```

### 4.3 Alertmanager Configuration

**Ø§Ù„Ù…ÙˆÙ‚Ø¹**: `monitoring/alertmanager.yml`

#### Ø£) Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø¹Ø§Ù…Ø©
```yaml
global:
  smtp_smarthost: 'localhost:587'
  smtp_from: 'alerts@pizza-z.com'
  smtp_auth_username: 'alerts@pizza-z.com'
  smtp_auth_password: 'password'
  smtp_require_tls: true

templates:
  - '/etc/alertmanager/templates/*.tmpl'
```

#### Ø¨) ØªÙˆØ¬ÙŠÙ‡ Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡Ø§Øª
```yaml
route:
  group_by: ['alertname', 'service']
  group_wait: 10s
  group_interval: 10s
  repeat_interval: 1h
  receiver: 'default-receiver'
  
  routes:
    # ØªÙ†Ø¨ÙŠÙ‡Ø§Øª Ø­Ø±Ø¬Ø©
    - match:
        severity: critical
      receiver: 'critical-alerts'
      group_wait: 5s
      repeat_interval: 30m
      
    # ØªÙ†Ø¨ÙŠÙ‡Ø§Øª ØªØ­Ø°ÙŠØ±ÙŠØ©
    - match:
        severity: warning
      receiver: 'warning-alerts'
      group_wait: 30s
      repeat_interval: 2h
      
    # ØªÙ†Ø¨ÙŠÙ‡Ø§Øª Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
    - match:
        service: database
      receiver: 'database-alerts'
      group_wait: 10s
      repeat_interval: 1h
      
    # ØªÙ†Ø¨ÙŠÙ‡Ø§Øª Ø§Ù„Ø£Ø¹Ù…Ø§Ù„
    - match:
        service: business
      receiver: 'business-alerts'
      group_wait: 30s
      repeat_interval: 2h
```

#### Ø¬) Ø§Ù„Ù…Ø³ØªÙ„Ù…ÙˆÙ† (Receivers)
```yaml
receivers:
  # Ø§Ù„Ù…Ø³ØªÙ„Ù… Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ
  - name: 'default-receiver'
    email_configs:
      - to: 'admin@pizza-z.com'
        subject: '[Pizza Z] ØªÙ†Ø¨ÙŠÙ‡: {{ .GroupLabels.alertname }}'
        body: |
          {{ range .Alerts }}
          ØªÙ†Ø¨ÙŠÙ‡: {{ .Annotations.summary }}
          Ø§Ù„ÙˆØµÙ: {{ .Annotations.description }}
          Ø§Ù„Ø®Ø¯Ù…Ø©: {{ .Labels.service }}
          Ø§Ù„Ø´Ø¯Ø©: {{ .Labels.severity }}
          Ø§Ù„ÙˆÙ‚Øª: {{ .StartsAt }}
          {{ end }}
        html: |
          <h2>ØªÙ†Ø¨ÙŠÙ‡ Ù…Ù† Pizza Z</h2>
          {{ range .Alerts }}
          <div style="border: 1px solid #ccc; padding: 10px; margin: 10px 0;">
            <h3>{{ .Annotations.summary }}</h3>
            <p><strong>Ø§Ù„ÙˆØµÙ:</strong> {{ .Annotations.description }}</p>
            <p><strong>Ø§Ù„Ø®Ø¯Ù…Ø©:</strong> {{ .Labels.service }}</p>
            <p><strong>Ø§Ù„Ø´Ø¯Ø©:</strong> {{ .Labels.severity }}</p>
            <p><strong>Ø§Ù„ÙˆÙ‚Øª:</strong> {{ .StartsAt }}</p>
            {{ if .Annotations.runbook_url }}
            <p><a href="{{ .Annotations.runbook_url }}">Ø¯Ù„ÙŠÙ„ Ø§Ù„Ø§Ø³ØªÙƒØ´Ø§Ù</a></p>
            {{ end }}
          </div>
          {{ end }}

  # ØªÙ†Ø¨ÙŠÙ‡Ø§Øª Ø­Ø±Ø¬Ø©
  - name: 'critical-alerts'
    email_configs:
      - to: 'admin@pizza-z.com,manager@pizza-z.com'
        subject: '[Pizza Z] ØªÙ†Ø¨ÙŠÙ‡ Ø­Ø±Ø¬: {{ .GroupLabels.alertname }}'
        headers:
          'X-Priority': '1'
        html: |
          <h2 style="color: red;">ğŸš¨ ØªÙ†Ø¨ÙŠÙ‡ Ø­Ø±Ø¬ Ù…Ù† Pizza Z</h2>
          {{ range .Alerts }}
          <div style="border: 2px solid red; padding: 15px; margin: 10px 0; background-color: #ffe6e6;">
            <h3 style="color: red;">{{ .Annotations.summary }}</h3>
            <p><strong>Ø§Ù„ÙˆØµÙ:</strong> {{ .Annotations.description }}</p>
            <p><strong>Ø§Ù„Ø®Ø¯Ù…Ø©:</strong> {{ .Labels.service }}</p>
            <p><strong>Ø§Ù„ÙˆÙ‚Øª:</strong> {{ .StartsAt }}</p>
          </div>
          {{ end }}
    
    # Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Slack (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)
    slack_configs:
      - api_url: 'https://hooks.slack.com/services/YOUR/SLACK/WEBHOOK'
        channel: '#alerts'
        title: 'ØªÙ†Ø¨ÙŠÙ‡ Ø­Ø±Ø¬ Ù…Ù† Pizza Z'
        text: |
          {{ range .Alerts }}
          ğŸš¨ {{ .Annotations.summary }}
          {{ .Annotations.description }}
          {{ end }}
        color: 'danger'
        send_resolved: true

  # ØªÙ†Ø¨ÙŠÙ‡Ø§Øª Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
  - name: 'database-alerts'
    email_configs:
      - to: 'dba@pizza-z.com'
        subject: '[Pizza Z] ØªÙ†Ø¨ÙŠÙ‡ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª: {{ .GroupLabels.alertname }}'
        body: |
          {{ range .Alerts }}
          ğŸ—„ï¸ ØªÙ†Ø¨ÙŠÙ‡ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª: {{ .Annotations.summary }}
          Ø§Ù„ÙˆØµÙ: {{ .Annotations.description }}
          Ø§Ù„Ø´Ø¯Ø©: {{ .Labels.severity }}
          Ø§Ù„ÙˆÙ‚Øª: {{ .StartsAt }}
          {{ end }}
        headers:
          'X-Priority': '2'

  # ØªÙ†Ø¨ÙŠÙ‡Ø§Øª Ø§Ù„Ø£Ø¹Ù…Ø§Ù„
  - name: 'business-alerts'
    email_configs:
      - to: 'manager@pizza-z.com,business@pizza-z.com'
        subject: '[Pizza Z] ØªÙ†Ø¨ÙŠÙ‡ Ø§Ù„Ø£Ø¹Ù…Ø§Ù„: {{ .GroupLabels.alertname }}'
        body: |
          {{ range .Alerts }}
          ğŸ’¼ ØªÙ†Ø¨ÙŠÙ‡ Ø§Ù„Ø£Ø¹Ù…Ø§Ù„: {{ .Annotations.summary }}
          Ø§Ù„ÙˆØµÙ: {{ .Annotations.description }}
          Ø§Ù„Ø´Ø¯Ø©: {{ .Labels.severity }}
          Ø§Ù„ÙˆÙ‚Øª: {{ .StartsAt }}
          {{ end }}
        headers:
          'X-Priority': '2'
```

#### Ø¯) Ù‚ÙˆØ§Ø¹Ø¯ Ù‚Ù…Ø¹ Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡Ø§Øª (Inhibit Rules)
```yaml
# Ù‚Ù…Ø¹ Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡Ø§Øª
inhibit_rules:
  # Ù‚Ù…Ø¹ Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡Ø§Øª Ø§Ù„ØªØ­Ø°ÙŠØ±ÙŠØ© Ø¹Ù†Ø¯ ÙˆØ¬ÙˆØ¯ ØªÙ†Ø¨ÙŠÙ‡Ø§Øª Ø­Ø±Ø¬Ø©
  - source_match:
      severity: 'critical'
    target_match:
      severity: 'warning'
    equal: ['alertname', 'service']
  
  # Ù‚Ù…Ø¹ ØªÙ†Ø¨ÙŠÙ‡Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù… Ø¹Ù†Ø¯ ÙˆØ¬ÙˆØ¯ ØªÙ†Ø¨ÙŠÙ‡Ø§Øª Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
  - source_match:
      service: 'database'
    target_match:
      service: 'hybrid-system'
    equal: ['instance']
```

---

## 5. Ø§Ù„ØªÙƒØ§Ù…Ù„ Ø¨ÙŠÙ† Ø§Ù„Ø£Ù†Ø¸Ù…Ø©

### 5.1 ØªØ¯ÙÙ‚ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Frontend       â”‚
â”‚  (React)        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”œâ”€â”€â–º Ø¥Ø´Ø¹Ø§Ø± Ù…ØªØµÙØ­
         â”œâ”€â”€â–º ØµÙˆØª ØªÙ†Ø¨ÙŠÙ‡
         â””â”€â”€â–º Service Worker Push
                  â”‚
                  â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚  Background      â”‚
         â”‚  Notification   â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Ù…Ø´ÙƒÙ„Ø© Ù†Ø¸Ø§Ù…    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Prometheus     â”‚
â”‚  (Metrics)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Alert Rules    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Alertmanager   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”œâ”€â”€â–º Email
         â”œâ”€â”€â–º Slack
         â””â”€â”€â–º SMS (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)
```

### 5.2 Ø§Ø³ØªØ®Ø¯Ø§Ù… sessionStorage Ùˆ localStorage

#### Ø£) ØªØªØ¨Ø¹ Ø¹Ø¯Ø¯ Ø§Ù„Ø·Ù„Ø¨Ø§Øª (WaiterInterface)
```typescript
// Ø­ÙØ¸ Ø¹Ø¯Ø¯ Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ø­Ø§Ù„ÙŠ
sessionStorage.setItem('waiter_orders_count', currentCount.toString());

// Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„Ø¹Ø¯Ø¯ Ø§Ù„Ø³Ø§Ø¨Ù‚
const prevCount = parseInt(sessionStorage.getItem('waiter_orders_count') || '0');
```

#### Ø¨) ØªØªØ¨Ø¹ Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© (CashierInterface)
```typescript
// Ø§Ø³ØªØ®Ø¯Ø§Ù… Set Ù„ØªØªØ¨Ø¹ IDs Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ù…Ø¹Ø±ÙˆÙØ©
const [knownOrderIds, setKnownOrderIds] = useState<Set<number>>(new Set());
```

#### Ø¬) ØªØªØ¨Ø¹ Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ù…ØªØ£Ø®Ø±Ø©
```typescript
// Ø­ÙØ¸ Ø¢Ø®Ø± ÙˆÙ‚Øª ØªÙ†Ø¨ÙŠÙ‡ Ù„ÙƒÙ„ Ø·Ù„Ø¨
const [alertedOrders, setAlertedOrders] = useState<{ [key: number]: number }>({});
```

### 5.3 Ø§Ù„Ø§Ø³ØªÙ…Ø§Ø¹ Ù„Ù„Ø£Ø­Ø¯Ø§Ø« Ø§Ù„Ù…Ø®ØµØµØ©

```typescript
// Ø§Ù„Ø§Ø³ØªÙ…Ø§Ø¹ Ù„ØªØºÙŠÙŠØ±Ø§Øª ÙÙŠ localStorage Ø¹Ù†Ø¯ Ø¥Ù†Ø´Ø§Ø¡ Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯
React.useEffect(() => {
  const handleStorageChange = (e: StorageEvent) => {
    if (e.key === 'newOrderCreated' || e.key === 'orderCreated') {
      refetch();
    }
  };
  
  // Ø§Ù„Ø§Ø³ØªÙ…Ø§Ø¹ Ù„Ù„Ø£Ø­Ø¯Ø§Ø« Ø§Ù„Ù…Ø®ØµØµØ©
  const handleNewOrderEvent = () => {
    refetch();
  };
  
  window.addEventListener('storage', handleStorageChange);
  window.addEventListener('newOrderCreated', handleNewOrderEvent);
  
  // Ø£ÙŠØ¶Ø§Ù‹ Ø§Ù„Ø§Ø³ØªÙ…Ø§Ø¹ Ù„Ù„ØªØºÙŠÙŠØ±Ø§Øª ÙÙŠ Ù†ÙØ³ Ø§Ù„Ù†Ø§ÙØ°Ø©
  const checkForNewOrders = setInterval(() => {
    const newOrderFlag = localStorage.getItem('newOrderCreated');
    if (newOrderFlag === 'true') {
      localStorage.removeItem('newOrderCreated');
      refetch();
    }
  }, 500);
  
  return () => {
    window.removeEventListener('storage', handleStorageChange);
    window.removeEventListener('newOrderCreated', handleNewOrderEvent);
    clearInterval(checkForNewOrders);
  };
}, [refetch]);
```

---

## 6. Ø£ÙØ¶Ù„ Ø§Ù„Ù…Ù…Ø§Ø±Ø³Ø§Øª ÙˆØ§Ù„ØªÙˆØµÙŠØ§Øª

### 6.1 Ø·Ù„Ø¨ Ø§Ù„Ø¥Ø°Ù†
- âœ… Ø§Ø·Ù„Ø¨ Ø§Ù„Ø¥Ø°Ù† Ø¹Ù†Ø¯ Ø§Ù„ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø£ÙˆÙ„ Ù„Ù„ØµÙØ­Ø©
- âœ… Ù„Ø§ ØªØ·Ù„Ø¨ Ø§Ù„Ø¥Ø°Ù† Ø¨Ø´ÙƒÙ„ Ù…ØªÙƒØ±Ø±
- âœ… ØªØ¹Ø§Ù…Ù„ Ù…Ø¹ Ø§Ù„Ø­Ø§Ù„Ø§Øª Ø§Ù„Ù…Ø®ØªÙ„ÙØ©: `granted`, `denied`, `default`

### 6.2 ØªØ¬Ù†Ø¨ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø§Ù„Ù…ÙƒØ±Ø±Ø©
- âœ… Ø§Ø³ØªØ®Ø¯Ù… `tag` Ù„Ù…Ù†Ø¹ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø§Ù„Ù…ÙƒØ±Ø±Ø©
- âœ… ØªØªØ¨Ø¹ Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ù…Ø¹Ø±ÙˆÙØ© Ù„ØªØ¬Ù†Ø¨ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø¹Ù†Ø¯ Ø§Ù„ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø£ÙˆÙ„
- âœ… Ø§Ø³ØªØ®Ø¯Ù… `sessionStorage` Ùˆ `localStorage` Ø¨Ø­Ø°Ø±

### 6.3 ØªØ­Ø³ÙŠÙ† Ø§Ù„Ø£Ø¯Ø§Ø¡
- âœ… Ø§Ø³ØªØ®Ø¯Ù… `useCallback` Ù„Ù„Ø¯ÙˆØ§Ù„ Ø§Ù„ØµÙˆØªÙŠØ©
- âœ… Ø§Ø³ØªØ®Ø¯Ù… `useEffect` Ù…Ø¹ dependencies ØµØ­ÙŠØ­Ø©
- âœ… Ù†Ø¸Ù Ø§Ù„Ù€ intervals ÙˆØ§Ù„Ù€ event listeners

### 6.4 Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø£Ø®Ø·Ø§Ø¡
- âœ… Ø§Ø³ØªØ®Ø¯Ù… try-catch Ù„Ù„Ø¹Ù…Ù„ÙŠØ§Øª Ø§Ù„ØµÙˆØªÙŠØ©
- âœ… ÙˆÙØ± Ø·Ø±Ù‚ Ø¨Ø¯ÙŠÙ„Ø© Ø¹Ù†Ø¯ ÙØ´Ù„ Web Audio API
- âœ… ØªØ¹Ø§Ù…Ù„ Ù…Ø¹ Ø­Ø§Ù„Ø§Øª Ø¹Ø¯Ù… Ø¯Ø¹Ù… Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª

### 6.5 Ø¥Ù…ÙƒØ§Ù†ÙŠØ© Ø§Ù„ÙˆØµÙˆÙ„
- âœ… ÙˆÙØ± Ø£ØµÙˆØ§Øª ØªÙ†Ø¨ÙŠÙ‡ ÙˆØ§Ø¶Ø­Ø©
- âœ… Ø§Ø³ØªØ®Ø¯Ù… Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª ÙˆØ§Ø¶Ø­Ø© ÙÙŠ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª
- âœ… Ø£Ø¶Ù Ù†Øµ Ø¨Ø¯ÙŠÙ„ Ù„Ù„ØµÙˆØ±

---

## 7. Ø®Ø·ÙˆØ§Øª Ø§Ù„ØªÙ†ÙÙŠØ° ÙÙŠ Ù…Ø´Ø±ÙˆØ¹ Ø¬Ø¯ÙŠØ¯

### 7.1 Ø¥Ø¹Ø¯Ø§Ø¯ Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø§Ù„Ù…ØªØµÙØ­

1. **Ø¥Ù†Ø´Ø§Ø¡ Hook Ù„Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª**
```typescript
// hooks/useNotifications.ts
import { useEffect, useState } from 'react';

export const useNotifications = () => {
  const [permission, setPermission] = useState<NotificationPermission>('default');
  const [isSupported, setIsSupported] = useState(false);

  useEffect(() => {
    if ('Notification' in window) {
      setIsSupported(true);
      setPermission(Notification.permission);
      
      if (Notification.permission === 'default') {
        Notification.requestPermission().then(setPermission);
      }
    }
  }, []);

  const showNotification = (title: string, options?: NotificationOptions) => {
    if (isSupported && permission === 'granted') {
      new Notification(title, options);
    }
  };

  return { isSupported, permission, showNotification };
};
```

2. **Ø§Ø³ØªØ®Ø¯Ø§Ù… Hook ÙÙŠ Ø§Ù„Ù…ÙƒÙˆÙ†Ø§Øª**
```typescript
const { showNotification } = useNotifications();

// Ø¹Ù†Ø¯ Ø§ÙƒØªØ´Ø§Ù Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯
showNotification('Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯', {
  body: 'ØªÙ… Ø§Ø³ØªÙ„Ø§Ù… Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯',
  icon: '/logo.png',
});
```

### 7.2 Ø¥Ø¹Ø¯Ø§Ø¯ Service Worker

1. **Ø¥Ù†Ø´Ø§Ø¡ Ù…Ù„Ù Service Worker**
```javascript
// public/sw.js
self.addEventListener('push', (event) => {
  if (event.data) {
    const data = event.data.json();
    self.registration.showNotification(data.title, {
      body: data.body,
      icon: '/icon.png',
    });
  }
});
```

2. **ØªØ³Ø¬ÙŠÙ„ Service Worker**
```typescript
// hooks/useServiceWorker.ts
useEffect(() => {
  if ('serviceWorker' in navigator) {
    navigator.serviceWorker.register('/sw.js');
  }
}, []);
```

### 7.3 Ø¥Ø¹Ø¯Ø§Ø¯ Prometheus + Alertmanager

1. **ØªØ«Ø¨ÙŠØª Prometheus**
```bash
docker run -d \
  -p 9090:9090 \
  -v $(pwd)/prometheus.yml:/etc/prometheus/prometheus.yml \
  prom/prometheus
```

2. **ØªØ«Ø¨ÙŠØª Alertmanager**
```bash
docker run -d \
  -p 9093:9093 \
  -v $(pwd)/alertmanager.yml:/etc/alertmanager/alertmanager.yml \
  prom/alertmanager
```

3. **Ø¥Ø¶Ø§ÙØ© Metrics ÙÙŠ Backend**
```python
# backend/metrics.py
from prometheus_client import Counter, Histogram, Gauge

orders_created = Counter('orders_created_total', 'Total orders created')
order_processing_time = Histogram('order_processing_duration_seconds', 'Order processing time')
active_orders = Gauge('active_orders', 'Number of active orders')
```

---

## 8. Ø§Ù„Ø®Ù„Ø§ØµØ©

Ù†Ø¸Ø§Ù… Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª ÙÙŠ Pizza Z ÙŠØªÙƒÙˆÙ† Ù…Ù†:

1. **Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø§Ù„Ù…ØªØµÙØ­**: Ù„Ù„Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© ÙˆØ§Ù„Ù…ØªØ£Ø®Ø±Ø©
2. **Ø¥Ø´Ø¹Ø§Ø±Ø§Øª ØµÙˆØªÙŠØ©**: Ø£ØµÙˆØ§Øª ØªÙ†Ø¨ÙŠÙ‡ Ù…Ø®ØªÙ„ÙØ© Ø­Ø³Ø¨ Ù†ÙˆØ¹ Ø§Ù„Ø­Ø¯Ø«
3. **Service Worker**: Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø®Ù„ÙÙŠØ© Ø­ØªÙ‰ Ø¹Ù†Ø¯ Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚
4. **Ù†Ø¸Ø§Ù… Ù…Ø±Ø§Ù‚Ø¨Ø©**: Prometheus + Alertmanager Ù„Ù„ØªÙ†Ø¨ÙŠÙ‡Ø§Øª Ø¹Ù„Ù‰ Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ù†Ø¸Ø§Ù…

### Ø§Ù„Ù…Ù„ÙØ§Øª Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©:
- `frontend/src/pages/WaiterInterface.tsx` - Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø§Ù„Ù†Ø§Ø¯Ù„
- `frontend/src/pages/CashierInterface.tsx` - Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø§Ù„ÙƒØ§Ø´ÙŠØ± (Ù…ØªÙ‚Ø¯Ù…Ø©)
- `frontend/public/sw.js` - Service Worker
- `frontend/src/hooks/useServiceWorker.ts` - Hook Ù„Ø¥Ø¯Ø§Ø±Ø© Service Worker
- `monitoring/prometheus.yml` - ØªÙƒÙˆÙŠÙ† Prometheus
- `monitoring/alert_rules.yml` - Ù‚ÙˆØ§Ø¹Ø¯ Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡
- `monitoring/alertmanager.yml` - ØªÙƒÙˆÙŠÙ† Alertmanager

### Ø§Ù„Ù…ÙŠØ²Ø§Øª Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©:
- âœ… ÙƒØ´Ù Ø°ÙƒÙŠ Ù„Ù„Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© (ØªØ¬Ù†Ø¨ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø§Ù„Ù…ÙƒØ±Ø±Ø©)
- âœ… ØªÙ†Ø¨ÙŠÙ‡Ø§Øª Ù„Ù„Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ù…ØªØ£Ø®Ø±Ø© (15 Ø¯Ù‚ÙŠÙ‚Ø© Ø«Ù… ÙƒÙ„ 5 Ø¯Ù‚Ø§Ø¦Ù‚)
- âœ… Ø£ØµÙˆØ§Øª ØªÙ†Ø¨ÙŠÙ‡ Ù…Ø®ØªÙ„ÙØ© Ø­Ø³Ø¨ Ù†ÙˆØ¹ Ø§Ù„Ø­Ø¯Ø«
- âœ… Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø®Ù„ÙÙŠØ© Ø¹Ø¨Ø± Service Worker
- âœ… Ù†Ø¸Ø§Ù… Ù…Ø±Ø§Ù‚Ø¨Ø© Ø´Ø§Ù…Ù„ Ù…Ø¹ Prometheus
- âœ… ØªÙˆØ¬ÙŠÙ‡ Ø°ÙƒÙŠ Ù„Ù„ØªÙ†Ø¨ÙŠÙ‡Ø§Øª Ø­Ø³Ø¨ Ø§Ù„Ø´Ø¯Ø© ÙˆØ§Ù„Ø®Ø¯Ù…Ø©

---

## 9. Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹ ÙˆØ§Ù„Ù…ØµØ§Ø¯Ø±

- [MDN - Notifications API](https://developer.mozilla.org/en-US/docs/Web/API/Notifications_API)
- [MDN - Service Worker API](https://developer.mozilla.org/en-US/docs/Web/API/Service_Worker_API)
- [MDN - Web Audio API](https://developer.mozilla.org/en-US/docs/Web/API/Web_Audio_API)
- [Prometheus Documentation](https://prometheus.io/docs/)
- [Alertmanager Documentation](https://prometheus.io/docs/alerting/latest/alertmanager/)

---

**ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡**: 2024  
**Ø§Ù„Ø¥ØµØ¯Ø§Ø±**: 1.0.0  
**Ø§Ù„Ù…Ø´Ø±ÙˆØ¹**: Pizza Z Restaurant Management System

