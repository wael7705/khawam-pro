# ููุฎุต ุงูุชูููุฐ - ูุธุงู ุงูุญูุงูุฉ ูุงูุฏูุน ุงูุฅููุชุฑููู

## โ ูุง ุชู ุฅูุฌุงุฒู

### 1. ูุธุงู ุงููุตุงุฏูุฉ ูุงูุตูุงุญูุงุช (Authentication & Authorization)

#### ุงูููุฒุงุช:
- โ ุชุณุฌูู ุฏุฎูู ุจุฑูู ูุงุชู ุณูุฑู/ุฏููู ุฃู ุจุฑูุฏ ุฅููุชุฑููู
- โ ูุธุงู ุตูุงุญูุงุช (ูุฏูุฑ/ููุธู/ุนููู)
- โ JWT tokens ูููุตุงุฏูุฉ
- โ ุชุดููุฑ ูููุงุช ุงููุฑูุฑ ุจุงุณุชุฎุฏุงู bcrypt

#### ุงููููุงุช ุงููุถุงูุฉ/ุงููุนุฏูุฉ:
- `backend/routers/auth.py` - ูุธุงู ุงููุตุงุฏูุฉ ุงููุงูู
- `backend/models.py` - ุฅุถุงูุฉ UserType model
- `backend/init_users.py` - ุณูุฑูุจุช ูุฅูุดุงุก ุงููุณุชุฎุฏููู ุงูุงูุชุฑุงุถููู

#### ุงููุณุชุฎุฏููู ุงูุงูุชุฑุงุถููู:
**ุงููุฏูุฑูู:**
- Phone: `0966320114`, Password: `admin123`
- Phone: `+963955773227`, Password: `khawam-p`

**ุงูููุธููู:**
- Email: `khawam-1@gmail.com`, Password: `khawam-1`
- Email: `khawam-2@gmail.com`, Password: `khawam-2`
- Email: `khawam-3@gmail.com`, Password: `khawam-3`

**ุงูุนููู:**
- Email: `customer@gmail.com`, Password: `963214`

### 2. ุฅุนุฏุงุฏุงุช ุงูุฏูุน ุงูุฅููุชุฑููู (Payment Settings)

#### ุงูููุฒุงุช:
- โ ุฌุฏูู `payment_settings` ูุชุฎุฒูู ุจูุงูุงุช ุดุงู ูุงุด
- โ ูุงุฌูุฉ ููุญุฉ ุงูุชุญูู ูุฅุฏุงุฑุฉ ุฅุนุฏุงุฏุงุช ุงูุฏูุน (ูุฏูุฑ ููุท)
- โ API endpoints ูุฅุฏุงุฑุฉ ุงูุฅุนุฏุงุฏุงุช

#### ุงููููุงุช ุงููุถุงูุฉ:
- `backend/routers/payments.py` - ุฅุฏุงุฑุฉ ุฅุนุฏุงุฏุงุช ุงูุฏูุน
- `backend/models.py` - PaymentSettings model
- `backend/routers/admin.py` - endpoints ุฅุฏุงุฑุฉ ุงูุฅุนุฏุงุฏุงุช ูู ููุญุฉ ุงูุชุญูู

#### API Endpoints:
- `GET /api/payments/settings` - ุงูุญุตูู ุนูู ุงูุฅุนุฏุงุฏุงุช (ูุฏูุฑ ููุท)
- `POST /api/payments/settings` - ุฅูุดุงุก ุฅุนุฏุงุฏุงุช ุฌุฏูุฏุฉ (ูุฏูุฑ ููุท)
- `PUT /api/payments/settings/{id}` - ุชุญุฏูุซ ุงูุฅุนุฏุงุฏุงุช (ูุฏูุฑ ููุท)
- `GET /api/payments/settings/public` - ูุนูููุงุช ุงูุฏูุน ุงูุนุงูุฉ (ููุนุฑุถ ููุนููุงุก)

### 3. ูุธุงู ุงูุฏูุน ุจุงูุชูุณูุท (Installment Payment System)

#### ุงูููุฒุงุช:
- โ ุชุชุจุน ุงููุจูุบ ุงููุฏููุน ูุงููุชุจูู
- โ ุชุญุฏูุซ ุชููุงุฆู ูุญุงูุฉ ุงูุฏูุน (pending/partial/paid)
- โ ุฏุนู ุฏูุน ุฌุฒุฆู ูุชุนุฏุฏ ุงููุฑุงุช
- โ ุนุฑุถ ูุนูููุงุช ุงูุชูุณูุท ูู ููุญุฉ ุงูุชุญูู

#### ุงูุญููู ุงููุถุงูุฉ ุฅูู ุฌุฏูู `orders`:
- `paid_amount` - ุงููุจูุบ ุงููุฏููุน
- `remaining_amount` - ุงููุจูุบ ุงููุชุจูู
- `payment_method` - ุทุฑููุฉ ุงูุฏูุน (ุงูุชุฑุงุถู: sham_cash)
- `payment_status` - ุญุงูุฉ ุงูุฏูุน (pending/partial/paid/refunded)

#### API Endpoints:
- `PUT /api/admin/orders/{order_id}/payment` - ุชุญุฏูุซ ุญุงูุฉ ุงูุฏูุน ููุทูุจ

#### ุงููููุงุช ุงููุนุฏูุฉ:
- `backend/models.py` - ุฅุถุงูุฉ ุญููู ุงูุชูุณูุท
- `backend/routers/orders.py` - ุชููุฆุฉ ุญููู ุงูุชูุณูุท ุนูุฏ ุฅูุดุงุก ุงูุทูุจ
- `backend/routers/admin.py` - ุนุฑุถ ูุชุญุฏูุซ ุจูุงูุงุช ุงูุชูุณูุท

## ๐ ููููุฉ ุงูุชุดุบูู

### 1. ุชููุฆุฉ ูุงุนุฏุฉ ุงูุจูุงูุงุช ูุงููุณุชุฎุฏููู:

```bash
cd backend
python init_users.py
```

ูุฐุง ุงูุณูุฑูุจุช ุณูููู ุจู:
- ุฅูุดุงุก ุฌุฏูู `user_types` ูุฃููุงุน ุงููุณุชุฎุฏููู
- ุฅูุดุงุก ุฌุฏูู `payment_settings`
- ุฅุถุงูุฉ ุงูุฃุนูุฏุฉ ุงูุฌุฏูุฏุฉ ููุชูุณูุท ูู ุฌุฏูู `orders`
- ุฅูุดุงุก ุงููุณุชุฎุฏููู ุงูุงูุชุฑุงุถููู ุจูููุงุช ูุฑูุฑ ูุดูุฑุฉ

### 2. ุฅุนุฏุงุฏ ูุชุบูุฑุงุช ุงูุจูุฆุฉ:

ุฃุถู ุฅูู ููู `.env`:
```env
SECRET_KEY=your-secret-key-here-change-in-production
DATABASE_URL=your-database-url
```

**ููุงุญุธุฉ:** ูู ุงูุฅูุชุงุฌุ ูุฌุจ ุงุณุชุฎุฏุงู `SECRET_KEY` ููู ููู ูุชุบูุฑุงุช ุงูุจูุฆุฉ.

### 3. ุชุดุบูู ุงูุฎุงุฏู:

```bash
cd backend
uvicorn main:app --reload
```

## ๐ ุงุณุชุฎุฏุงู API

### ุชุณุฌูู ุงูุฏุฎูู:

```bash
POST /api/auth/login
{
  "username": "0966320114",  # ุฃู ุงูุจุฑูุฏ ุงูุฅููุชุฑููู
  "password": "admin123"
}
```

ุงูุงุณุชุฌุงุจุฉ:
```json
{
  "access_token": "eyJ...",
  "token_type": "bearer",
  "user": {
    "id": 1,
    "name": "ูุฏูุฑ 1",
    "user_type": {
      "name_ar": "ูุฏูุฑ"
    }
  }
}
```

### ุฅุนุฏุงุฏ ุงูุฏูุน (ูุฏูุฑ ููุท):

```bash
POST /api/payments/settings
Headers: Authorization: Bearer <token>
{
  "account_name": "ุงุณู ุงูุญุณุงุจ",
  "account_number": "ุฑูู ุงูุญุณุงุจ",
  "phone_number": "+963...",
  "api_key": "...",
  "api_secret": "..."
}
```

### ุชุญุฏูุซ ุญุงูุฉ ุงูุฏูุน ุจุงูุชูุณูุท:

```bash
PUT /api/admin/orders/{order_id}/payment
Headers: Authorization: Bearer <token>
{
  "paid_amount": 5000.00
}
```

ุงูุงุณุชุฌุงุจุฉ:
```json
{
  "success": true,
  "order": {
    "final_amount": 10000.00,
    "paid_amount": 5000.00,
    "remaining_amount": 5000.00,
    "payment_status": "partial"
  }
}
```

## ๐ ุงูุฃูุงู

### ุตูุงุญูุงุช ุงููุณุชุฎุฏููู:

- **ูุฏูุฑ**: ูุตูู ูุงูู ูุฌููุน ุงูุฃูุณุงู
- **ููุธู**: ูุตูู ูุฅุฏุงุฑุฉ ุงูุทูุจุงุช ูุงูููุชุฌุงุช ูุงูุฎุฏูุงุช
- **ุนููู**: ูุตูู ูุนุฑุถ ุงูุทูุจุงุช ูุฅูุดุงุก ุทูุจุงุช ุฌุฏูุฏุฉ

### ุงูุญูุงูุฉ:
- ูููุงุช ุงููุฑูุฑ ูุดูุฑุฉ ุจู bcrypt
- JWT tokens ูุน ุงูุชูุงุก ุตูุงุญูุฉ
- ุงูุชุญูู ูู ุงูุตูุงุญูุงุช ูู ูู endpoint ูุญูู

## ๐ ููุงุญุธุงุช ูููุฉ

1. **SECRET_KEY**: ูุฌุจ ุชุบููุฑู ูู ุงูุฅูุชุงุฌ ูุงุณุชุฎุฏุงู ูุชุบูุฑ ุจูุฆุฉ ุขูู
2. **Migration**: ุงูุณูุฑูุจุช `init_users.py` ูุถูู ุงูุฃุนูุฏุฉ ุงูุฌุฏูุฏุฉ ุชููุงุฆูุงู
3. **Backward Compatibility**: ุงููุธุงู ูุชูุงูู ูุน ุงูุทูุจุงุช ุงููุฏููุฉ

## ๐ฏ ุงูุฎุทูุงุช ุงูุชุงููุฉ (ุงุฎุชูุงุฑู)

1. ุฅุถุงูุฉ ูุงุฌูุฉ ูุณุชุฎุฏู ูุฅุนุฏุงุฏุงุช ุงูุฏูุน ูู Frontend
2. ุฅุถุงูุฉ ูุงุฌูุฉ ูุชุญุฏูุซ ุญุงูุฉ ุงูุฏูุน ุจุงูุชูุณูุท
3. ุฅุถุงูุฉ ุฅุดุนุงุฑุงุช ุนูุฏ ุชุญุฏูุซ ุญุงูุฉ ุงูุฏูุน
4. ุฅุถุงูุฉ ุชูุงุฑูุฑ ุงููุจูุนุงุช ูุงูุฏูุนุงุช

---

**ุชู ุงูุชูููุฐ ุจูุฌุงุญ! โ**


