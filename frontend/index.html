<!doctype html>
<html lang="ar" dir="rtl">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/jpeg" href="/logo.jpg" sizes="192x192" />
    <link rel="apple-touch-icon" href="/logo.jpg" />
    <link rel="shortcut icon" type="image/jpeg" href="/logo.jpg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
     integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
     crossorigin=""/>
    <!-- Preload critical images for faster page load - only for above-the-fold content -->
    <!-- Removed preload for images that are not immediately visible to avoid warnings -->
    <title>Ø®ÙˆØ§Ù… - Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø·Ø¨Ø§Ø¹Ø© ÙˆØ§Ù„ØªØµÙ…ÙŠÙ…</title>
    <script>
      // Ù…Ø¹Ø§Ù„Ø¬Ø© Ø£Ø®Ø·Ø§Ø¡ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù€ chunks Ù‚Ø¨Ù„ ØªØ­Ù…ÙŠÙ„ React
      (function() {
        let handled = false;
        
        function handleScriptError(event) {
          if (event.target && event.target.tagName === 'SCRIPT') {
            const script = event.target;
            if (handled || !script.src) return;
            handled = true;
            console.error('âŒ Script load failed:', script.src);

            // Try to recover from stale caches / SW mismatch after deployment
            (async function() {
              try {
                if ('serviceWorker' in navigator) {
                  const regs = await navigator.serviceWorker.getRegistrations();
                  for (const r of regs) await r.unregister();
                }
                if ('caches' in window) {
                  const names = await caches.keys();
                  for (const n of names) await caches.delete(n);
                }
              } catch (e) {}

              console.warn('ğŸ”„ Reloading page after clearing caches...');
              setTimeout(function() {
                window.location.reload();
              }, 800);
            })();
            }
          }
        }
        
        window.addEventListener('error', handleScriptError, true);
      })();
    </script>
  </head>
  <body>
    <div id="root">
      <div style="display: flex; justify-content: center; align-items: center; height: 100vh; flex-direction: column; gap: 20px;">
        <div style="font-size: 18px; color: #666;">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</div>
        <div style="width: 40px; height: 40px; border: 4px solid #f3f3f3; border-top: 4px solid #dc2626; border-radius: 50%; animation: spin 1s linear infinite;"></div>
      </div>
      <style>
        @keyframes spin {
          0% { transform: rotate(0deg); }
          100% { transform: rotate(360deg); }
        }
      </style>
    </div>
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>
