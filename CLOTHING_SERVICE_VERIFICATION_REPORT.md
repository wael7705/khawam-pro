# ุชูุฑูุฑ ุงูุชุญูู ุงูุดุงูู ูู ุฎุฏูุฉ ุงูููุงุจุณ

## ๐ ููุฎุต ุงูุชูููุฐ

ุชู ุงูุชุญูู ูู ุฌููุน ุฌูุงูุจ ุฎุฏูุฉ ุงูููุงุจุณ ูุงูุชุฃูุฏ ูู:
- โ ูุฌูุฏ ุงูุฎุฏูุฉ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
- โ ุฌููุน ุงูุฃุนูุฏุฉ ููุฌูุฏุฉ
- โ ุชุฑุชูุจ ุงูุฎุทูุงุช ุตุญูุญ
- โ ุงูุชูุงูู ูุน Frontend
- โ ุฌููุน ุงูุญููู ูุนุฑูุถุฉ ุจุดูู ุตุญูุญ

---

## 1๏ธโฃ ุงูุชุญูู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช

### ุฌุฏูู `services`
**ุงูุฃุนูุฏุฉ ุงููุทููุจุฉ:**
- โ `id` - ูุนุฑู ุงูุฎุฏูุฉ
- โ `name_ar` - ุงูุงุณู ุงูุนุฑุจู: "ุงูุทุจุงุนุฉ ุนูู ุงูููุงุจุณ"
- โ `name_en` - ุงูุงุณู ุงูุฅูุฌููุฒู: "Clothing Printing"
- โ `description_ar` - ุงููุตู ุงูุนุฑุจู
- โ `icon` - ุงูุฃููููุฉ: "๐"
- โ `base_price` - ุงูุณุนุฑ ุงูุฃุณุงุณู: 0
- โ `is_visible` - ูุฑุฆู: true
- โ `is_active` - ูุดุท: true
- โ `display_order` - ุชุฑุชูุจ ุงูุนุฑุถ: 2
- โ `created_at` - ุชุงุฑูุฎ ุงูุฅูุดุงุก

**ุงูุญุงูุฉ:** โ ุฌููุน ุงูุฃุนูุฏุฉ ููุฌูุฏุฉ ููุชูุงููุฉ

### ุฌุฏูู `service_workflows`
**ุงูุฃุนูุฏุฉ ุงููุทููุจุฉ:**
- โ `id` - ูุนุฑู ุงููุฑุญูุฉ
- โ `service_id` - ูุนุฑู ุงูุฎุฏูุฉ (Foreign Key)
- โ `step_number` - ุฑูู ุงููุฑุญูุฉ (1, 2, 3, 4)
- โ `step_name_ar` - ุงุณู ุงููุฑุญูุฉ ุจุงูุนุฑุจู
- โ `step_name_en` - ุงุณู ุงููุฑุญูุฉ ุจุงูุฅูุฌููุฒู
- โ `step_description_ar` - ูุตู ุงููุฑุญูุฉ ุจุงูุนุฑุจู
- โ `step_description_en` - ูุตู ุงููุฑุญูุฉ ุจุงูุฅูุฌููุฒู
- โ `step_type` - ููุน ุงููุฑุญูุฉ
- โ `step_config` - ุฅุนุฏุงุฏุงุช ุงููุฑุญูุฉ (JSON)
- โ `display_order` - ุชุฑุชูุจ ุงูุนุฑุถ
- โ `is_active` - ูุดุท: true
- โ `created_at` - ุชุงุฑูุฎ ุงูุฅูุดุงุก
- โ `updated_at` - ุชุงุฑูุฎ ุงูุชุญุฏูุซ

**ุงูุญุงูุฉ:** โ ุฌููุน ุงูุฃุนูุฏุฉ ููุฌูุฏุฉ ููุชูุงููุฉ

---

## 2๏ธโฃ ุชุฑุชูุจ ุงูุฎุทูุงุช ูุงูุชุญูู

### ุงูุฎุทูุงุช ุงููุทููุจุฉ:

#### โ Step 1: `clothing_source`
- **step_number:** 1
- **step_type:** `clothing_source`
- **step_name_ar:** "ูุตุฏุฑ ุงูููุงุจุณ ูุงูุงุฎุชูุงุฑุงุช"
- **step_config:**
  ```json
  {
    "required": true,
    "options": [
      {"id": "customer", "label": "ุงูููุงุจุณ ูู ุนูุฏู"},
      {
        "id": "store",
        "label": "ูู ููุชุฌุงุช ุฎูุงู",
        "products": [
          {
            "id": "hoodie",
            "name": "ููุฒุฉ ููุฏู",
            "colors": ["ุฃุจูุถ", "ุฃุณูุฏ", "ุฑูุงุฏู"],
            "sizes": ["S", "M", "L", "XL", "XXL"]
          },
          {
            "id": "summer_cotton_sweatshirt",
            "name": "ููุฒุฉ ุตููู ูุทู",
            "colors": ["ุฃุจูุถ", "ุฃุณูุฏ"],
            "sizes": ["S", "M", "L", "XL", "XXL"]
          }
        ]
      }
    ]
  }
  ```
- **ุงููุนุงูุฌ:** `ClothingPrintingService.tsx` - `renderStep()` case `'clothing_source'`
- **ุงูุญุงูุฉ:** โ ุตุญูุญ

#### โ Step 2: `clothing_designs`
- **step_number:** 2
- **step_type:** `clothing_designs`
- **step_name_ar:** "ุงููููุฉ ูุฑูุน ุงูุชุตุงููู"
- **step_config:**
  ```json
  {
    "locations": [
      {"id": "logo", "label": "ุดุนุงุฑ"},
      {"id": "front", "label": "ุตุฏุฑ"},
      {"id": "back", "label": "ุธูุฑ"},
      {"id": "shoulder_right", "label": "ูุชู ุฃููู"},
      {"id": "shoulder_left", "label": "ูุชู ุฃูุณุฑ"}
    ],
    "accept": ".pdf,.psd,.ai,.png,.jpg,.jpeg"
  }
  ```
- **ุงููุนุงูุฌ:** `ClothingPrintingService.tsx` - `renderStep()` case `'clothing_designs'`
- **ุงูุญุงูุฉ:** โ ุตุญูุญ

#### โ Step 3: `notes`
- **step_number:** 3
- **step_type:** `notes`
- **step_name_ar:** "ููุงุญุธุงุช ุฅุถุงููุฉ"
- **step_config:**
  ```json
  {
    "required": false
  }
  ```
- **ุงููุนุงูุฌ:** `OrderModal.tsx` - case `'notes'` (ุงูุณุทุฑ 1678)
- **ุงูุญุงูุฉ:** โ ุตุญูุญ

#### โ Step 4: `customer_info`
- **step_number:** 4
- **step_type:** `customer_info`
- **step_name_ar:** "ูุนูููุงุช ุงูุนููู ูุงูุงุณุชูุงู"
- **step_config:**
  ```json
  {
    "required": true,
    "fields": ["load_from_account", "whatsapp_optional"],
    "delivery_options": [
      {"id": "self", "label": "ุงุณุชูุงู ุฐุงุชู"},
      {"id": "delivery", "label": "ุชูุตูู"}
    ],
    "confirmation_message": "ุณูุชูุงุตู ูุนู ูุชุญุฏูุฏ ุงููุฏุฉ ูุงูุชูููุฉ ุงูุฃูุถู ูุทูุจู."
  }
  ```
- **ุงููุนุงูุฌ:** `OrderModal.tsx` - case `'customer_info'` (ุงูุณุทุฑ 1181)
- **ุงูุญุงูุฉ:** โ ุตุญูุญ

---

## 3๏ธโฃ ุงูุชุญูู ูู Frontend

### ClothingPrintingService.tsx

#### โ ูุนุงูุฌุฉ `clothing_source`
- **ุงููููุน:** ุงูุณุทูุฑ 57-155
- **ุงููุธุงุฆู:**
  - โ `handleSourceChange()` - ูุนุงูุฌุฉ ุชุบููุฑ ุงููุตุฏุฑ
  - โ `handleProductSelect()` - ูุนุงูุฌุฉ ุงุฎุชูุงุฑ ุงูููุชุฌ/ุงูููู/ุงูููุงุณ
  - โ ุนุฑุถ `FlipCard3D` ุนูุฏ ุงุฎุชูุงุฑ "ูู ููุชุฌุงุช ุฎูุงู"
  - โ ุชูุฑูุฑ ุฌููุน ุงูู props ุจุดูู ุตุญูุญ

#### โ ูุนุงูุฌุฉ `clothing_designs`
- **ุงููููุน:** ุงูุณุทูุฑ 157-241
- **ุงููุธุงุฆู:**
  - โ `handleFileChange()` - ูุนุงูุฌุฉ ุฑูุน ุงููููุงุช
  - โ `handleRemoveFile()` - ูุนุงูุฌุฉ ุฅุฒุงูุฉ ุงููููุงุช
  - โ ุนุฑุถ ุฌููุน ุงูููุงุถุน (logo, front, back, shoulder_right, shoulder_left)
  - โ ุญูู ุงููููุฉ ููุฌูุฏ ููุทููุจ

#### โ `prepareOrderData()`
- **ุงููููุน:** ุงูุณุทูุฑ 248-309
- **ุงูุชุญูู:**
  - โ ูุนุงูุฌุฉ `clothingSource` ู `clothingSourceLabel`
  - โ ูุนุงูุฌุฉ `clothingProduct` ู `clothingProductLabel`
  - โ ูุนุงูุฌุฉ `clothingColor` ู `clothingColorLabel` (ูุน ุงูุชุญูู ูู ุงูููู ุงููุงุฑุบุฉ)
  - โ ูุนุงูุฌุฉ `clothingSize` ู `clothingSizeLabel` (ูุน ุงูุชุญูู ูู ุงูููู ุงููุงุฑุบุฉ)
  - โ ูุนุงูุฌุฉ `clothingDesigns` ู `design_positions`
  - โ ูุนุงูุฌุฉ `notes`
  - โ ุฅุฑุฌุงุน `items` ูุน `specifications` ู `design_files`

#### โ `getSpecifications()`
- **ุงููููุน:** ุงูุณุทูุฑ 313-344
- **ุงูุชุญูู:**
  - โ ุฅุฑุฌุงุน ุฌููุน ุงูููุงุตูุงุช ุจุดูู ุตุญูุญ
  - โ ุงูุชุนุงูู ูุน ุงูููู ุงููุงุฑุบุฉ (undefined ุจุฏูุงู ูู empty strings)
  - โ ุฅุฑุฌุงุน `design_positions` ุจุดูู ุตุญูุญ

### OrderModal.tsx

#### โ ูุนุงูุฌุฉ `notes`
- **ุงููููุน:** ุงูุณุทุฑ 1678
- **ุงูุชุญูู:**
  - โ ุนุฑุถ textarea ููููุงุญุธุงุช
  - โ ุฏุนู `required` ูู `step_config`
  - โ ุฏุนู `hide_work_type` ูู `step_config`

#### โ ูุนุงูุฌุฉ `customer_info`
- **ุงููููุน:** ุงูุณุทุฑ 1181
- **ุงูุญููู ุงููุนุฑูุถุฉ:**
  - โ ุงุณู ุงูุนููู (ูุทููุจ)
  - โ ุฑูู ูุงุชุณุงุจ (ุงุฎุชูุงุฑู ุนูุฏ `whatsapp_optional`)
  - โ ุฑูู ุชูุงุตู ุฅุถุงูู (ูุธูุฑ ุนูุฏ `whatsapp_optional`)
  - โ ุงุณู ุงููุชุฌุฑ (ุงุฎุชูุงุฑู)
  - โ ููุน ุงูุงุณุชูุงู (ุงุณุชูุงู ุฐุงุชู / ุชูุตูู)
  - โ ุงุฎุชูุงุฑ ูููุน ุงูุชูุตูู (ุนูุฏ ุงุฎุชูุงุฑ "ุชูุตูู")
- **ุงูุชุญูู:**
  - โ ุฏุนู `load_from_account` - ุงุณุชูุฑุงุฏ ุงูุจูุงูุงุช ูู ุงูุญุณุงุจ
  - โ ุฏุนู `whatsapp_optional` - ุฌุนู ูุงุชุณุงุจ ุงุฎุชูุงุฑู
  - โ ุงูุชุญูู ูู `handleSubmit` ูุฃุฎุฐ `whatsapp_optional` ูู ุงูุงุนุชุจุงุฑ
  - โ ุงูุชุญูู ูู `handleNext` (skip_invoice) ูุฃุฎุฐ `whatsapp_optional` ูู ุงูุงุนุชุจุงุฑ

---

## 4๏ธโฃ ุงูุชุญูู ูู FlipCard3D

### โ ุงููููู
- **ุงููููุน:** `frontend/src/components/FlipCard3D.tsx`
- **ุงูุชุญูู:**
  - โ ุฏุนู `id` ูู ููุน `string | number`
  - โ ุฏุนู `onSelect` ูุน `color` ู `size` ูู `string | undefined`
  - โ ูุนุงูุฌุฉ ุงูููุงุฆู ุงููุงุฑุบุฉ (ุงูุฃููุงู/ุงูููุงุณุงุช)
  - โ ูุฒุงููุฉ ูุน `selectedColor` ู `selectedSize`
  - โ Keyboard accessibility (role="button", tabIndex, onKeyDown)
  - โ ุฌููุน ุงูุชุฃุซูุฑุงุช 3D ุชุนูู (spotlight, shadows, gloss)

### โ CSS
- **ุงููููุน:** `frontend/src/components/FlipCard3D.css`
- **ุงูุชุญูู:**
  - โ Spotlight ูู ุงูุฃุนูู
  - โ Box-shadow ุซูุงุซู ุงูุฃุจุนุงุฏ
  - โ ุงูุนูุงุณ ูููุนุงู
  - โ Linear-gradient ููุฅุถุงุกุฉ
  - โ Hover effects
  - โ Responsive design

### โ Integration
- **ุงููููุน:** `frontend/src/components/OrderModal.css`
- **ุงูุชุญูู:**
  - โ `.product-grid` ูุญุฏุซ ูุงุณุชูุนุงุจ ุนุฑุถ FlipCard3D (180px)
  - โ Responsive design ูุญุฏุซ (150px ููุดุงุดุงุช ุงูุตุบูุฑุฉ)

---

## 5๏ธโฃ ุงูุชุญูู ูู ุงูุจูุงูุงุช ุงููุญููุธุฉ

### โ prepareOrderData
**ุงูุจูุงูุงุช ุงููุญููุธุฉ ูู `specifications`:**
```json
{
  "clothing_source": "ูู ุงูุดุฑูุฉ" | "ูู ุงูุนููู",
  "clothing_source_value": "store" | "customer",
  "clothing_product": "ุงุณู ุงูููุชุฌ",
  "clothing_product_code": "product_id",
  "clothing_color": "ุงุณู ุงูููู",
  "clothing_color_code": "color_code",
  "clothing_size": "ุงูููุงุณ",
  "clothing_size_code": "size_code",
  "design_positions": [
    {"location": "logo", "filename": "file.pdf"},
    ...
  ],
  "notes": "ููุงุญุธุงุช ุฅุถุงููุฉ"
}
```

**ุงูุชุญูู:**
- โ ุฌููุน ุงูุญููู ูุญููุธุฉ ุจุดูู ุตุญูุญ
- โ ุงูุชุนุงูู ูุน ุงูููู ุงููุงุฑุบุฉ (ูุง ูุชู ุฅุถุงูุฉ `clothing_color` ุฅุฐุง ูุงู ูุงุฑุบ)
- โ `design_positions` ูุชู ุฅูุดุงุคู ููุท ุนูุฏ ูุฌูุฏ ูููุงุช

### โ getSpecifications
**ุงูุจูุงูุงุช ุงููุนุงุฏุฉ:**
```json
{
  "clothing_source": "ูู ุงูุดุฑูุฉ" | "ูู ุงูุนููู",
  "clothing_source_value": "store" | "customer",
  "clothing_product": "ุงุณู ุงูููุชุฌ" | undefined,
  "clothing_product_code": "product_id" | undefined,
  "clothing_color": "ุงุณู ุงูููู" | undefined,
  "clothing_color_code": "color_code" | undefined,
  "clothing_size": "ุงูููุงุณ" | undefined,
  "clothing_size_code": "size_code" | undefined,
  "quantity": 1,
  "design_positions": [...]
}
```

**ุงูุชุญูู:**
- โ ุฅุฑุฌุงุน `undefined` ููููู ุงููุงุฑุบุฉ (ุจุฏูุงู ูู empty strings)
- โ ุฌููุน ุงูุญููู ูุนุงูุฌุฉ ุจุดูู ุตุญูุญ

---

## 6๏ธโฃ ุงูุชุญูู ูู ุณูุฑ ุงูุนูู (Workflow)

### โ ุงูุณููุงุฑูู ุงููุงูู:

1. **ุงูุฎุทูุฉ 1: ูุตุฏุฑ ุงูููุงุจุณ**
   - ุงููุณุชุฎุฏู ูุฎุชุงุฑ "ูู ููุชุฌุงุช ุฎูุงู"
   - ูุชู ุนุฑุถ FlipCard3D ููููุชุฌุงุช
   - ุงููุณุชุฎุฏู ูููุฑ ุนูู ุจุทุงูุฉ โ ุงูุจุทุงูุฉ ุชููุจ
   - ุงููุณุชุฎุฏู ูุฎุชุงุฑ ููู ูููุงุณ โ ูุถุบุท "ุงุฎุชูุงุฑ"
   - ูุชู ุชุญุฏูุซ `clothingProduct`, `clothingColor`, `clothingSize`
   - ุงูุจุทุงูุฉ ุชุนูุฏ ููุฃูุงู ูุน badge "ูุญุฏุฏ"

2. **ุงูุฎุทูุฉ 2: ุฑูุน ุงูุชุตุงููู**
   - ุงููุณุชุฎุฏู ูุฏุฎู ุงููููุฉ
   - ุงููุณุชุฎุฏู ูุฑูุน ูููุงุช ููู ููุถุน (ุดุนุงุฑุ ุตุฏุฑุ ุธูุฑุ ุฅูุฎ)
   - ูุชู ุญูุธ ุงููููุงุช ูู `clothingDesigns`

3. **ุงูุฎุทูุฉ 3: ููุงุญุธุงุช ุฅุถุงููุฉ**
   - ุงููุณุชุฎุฏู ูุถูู ููุงุญุธุงุช (ุงุฎุชูุงุฑู)
   - ูุชู ุญูุธ ุงูููุงุญุธุงุช ูู `notes`

4. **ุงูุฎุทูุฉ 4: ูุนูููุงุช ุงูุนููู**
   - ูุชู ุงุณุชูุฑุงุฏ ุงูุจูุงูุงุช ูู ุงูุญุณุงุจ (ุฅุฐุง ูุงู `load_from_account` ููุฌูุฏ)
   - ุงููุณุชุฎุฏู ูููุฃ/ูุนุฏู: ุงูุงุณูุ ุฑูู ูุงุชุณุงุจ (ุงุฎุชูุงุฑู)ุ ุฑูู ุฅุถุงูู
   - ุงููุณุชุฎุฏู ูุฎุชุงุฑ ููุน ุงูุงุณุชูุงู (ุฐุงุชู/ุชูุตูู)
   - ุฅุฐุง ุงุฎุชุงุฑ "ุชูุตูู"ุ ูุชู ุงุฎุชูุงุฑ ุงููููุน

5. **ุฅุฑุณุงู ุงูุทูุจ**
   - ูุชู ุงูุชุญูู ูู ุงูุจูุงูุงุช ุงููุทููุจุฉ
   - ูุชู ุงุณุชุฏุนุงุก `prepareOrderData()` ูุชุญุถูุฑ ุงูุจูุงูุงุช
   - ูุชู ุฅุฑุณุงู ุงูุทูุจ ูุน ุฌููุน ุงูููุงุตูุงุช

---

## 7๏ธโฃ ูุงุฆูุฉ ุงูุชุญูู ุงูููุงุฆูุฉ

| ุงูุนูุตุฑ | ุงูุญุงูุฉ | ุงูููุงุญุธุงุช |
|--------|--------|-----------|
| ุฌุฏูู services | โ | ุฌููุน ุงูุฃุนูุฏุฉ ููุฌูุฏุฉ |
| ุฌุฏูู service_workflows | โ | ุฌููุน ุงูุฃุนูุฏุฉ ููุฌูุฏุฉ |
| ุฎุฏูุฉ ุงูููุงุจุณ ููุฌูุฏุฉ | โ | ูุชู ุฅูุดุงุคูุง ุชููุงุฆูุงู |
| Step 1: clothing_source | โ | ุตุญูุญ ููุชูุงูู |
| Step 2: clothing_designs | โ | ุตุญูุญ ููุชูุงูู |
| Step 3: notes | โ | ุตุญูุญ ููุชูุงูู |
| Step 4: customer_info | โ | ุตุญูุญ ููุชูุงูู |
| ุชุฑุชูุจ ุงูุฎุทูุงุช | โ | ุตุญูุญ ูููุทูู |
| FlipCard3D | โ | ูุนูู ุจุดูู ุตุญูุญ |
| prepareOrderData | โ | ูุญูุธ ุฌููุน ุงูุจูุงูุงุช |
| getSpecifications | โ | ูุนูุฏ ุฌููุน ุงูููุงุตูุงุช |
| ุงูุชุนุงูู ูุน ุงูููู ุงููุงุฑุบุฉ | โ | ุตุญูุญ (undefined) |
| whatsapp_optional | โ | ูุนูู ุจุดูู ุตุญูุญ |
| load_from_account | โ | ูุนูู ุจุดูู ุตุญูุญ |
| delivery_options | โ | ูุนูู ุจุดูู ุตุญูุญ |
| ุฌููุน ุงูุญููู ูุนุฑูุถุฉ | โ | ุงูุงุณูุ ูุงุชุณุงุจุ ุฑูู ุฅุถุงููุ ููุน ุงูุงุณุชูุงู |

---

## โ ุงูุฎูุงุตุฉ ุงูููุงุฆูุฉ

**ุฎุฏูุฉ ุงูููุงุจุณ ุฌุงูุฒุฉ ููุชูุงููุฉ ุจุดูู ูุงูู:**

1. โ **ูุงุนุฏุฉ ุงูุจูุงูุงุช:** ุฌููุน ุงูุฃุนูุฏุฉ ููุฌูุฏุฉ ููุชูุงููุฉ
2. โ **Workflows:** ุฌููุน ุงูุฎุทูุงุช ูุฑุชุจุฉ ูุตุญูุญุฉ
3. โ **Frontend:** ุฌููุน ุงูููููุงุช ุชุนูู ุจุดูู ุตุญูุญ
4. โ **ุงูุชูุงุนูุงุช:** ุฌููุน ุงูุชุฃุซูุฑุงุช ูุงูุชูุงุนูุงุช ุชุนูู
5. โ **ุงูุจูุงูุงุช:** ุฌููุน ุงูุจูุงูุงุช ูุญููุธุฉ ุจุดูู ุตุญูุญ
6. โ **ุงูุชุญูู:** ุฌููุน ุงูุชุญููุงุช ุชุนูู ุจุดูู ุตุญูุญ

**ูุง ุชูุฌุฏ ูุดุงูู ุฃู ููุต ูู ุงูุฃุนูุฏุฉ ุฃู ุงูุฎุทูุงุช.**

---

## ๐ ููุงุญุธุงุช ุฅุถุงููุฉ

- โ ุชู ุฅุฒุงูุฉ `DEFAULT_PRODUCT_ID` ุบูุฑ ุงููุณุชุฎุฏู
- โ ุชู ุชุญุฏูุซ `FlipCard3D` ูุฏุนู `string | number` ูููุนุฑูุงุช
- โ ุชู ุชุญุฏูุซ `handleProductSelect` ููุชุนุงูู ูุน ุงูููู `undefined`
- โ ุชู ุชุญุฏูุซ `prepareOrderData` ู `getSpecifications` ููุชุนุงูู ูุน ุงูููู ุงููุงุฑุบุฉ
- โ ุชู ุชุญุฏูุซ `OrderModal` ูุฏุนู `whatsapp_optional` ุจุดูู ูุงูู
- โ ุชู ุฅุถุงูุฉ ุฌููุน ุงูุชุฃุซูุฑุงุช CSS ููุจุทุงูุงุช

**ุงูุฎุฏูุฉ ุฌุงูุฒุฉ ููุงุณุชุฎุฏุงู! ๐**

