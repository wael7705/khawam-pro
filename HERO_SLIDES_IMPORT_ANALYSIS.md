# ุชุญููู ุทุฑููุฉ ุงุณุชูุฑุงุฏ ุงูุณูุงูุฏุงุช (Hero Slides)

## ูุธุฑุฉ ุนุงูุฉ

ูุธุงู ุงูุณูุงูุฏุงุช ูู ุงููููุน ูุณุชุฎุฏู **ูุธุงู ูุฌูู** ูุฌูุน ุจูู:
1. **ุงูุณูุงูุฏุงุช ุงููุญููุฉ** (ูู ุงูููุฏ) - ูู fallback
2. **ุงูุณูุงูุฏุงุช ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช** - ุนุจุฑ API

---

## 1. ุงููุตุฏุฑ ุงูุฃุณุงุณู: ูุงุนุฏุฉ ุงูุจูุงูุงุช

### Backend API
- **Endpoint:** `GET /api/hero-slides?is_active=true`
- **ุงูููู:** `backend/routers/hero_slides.py`
- **ุงูุฌุฏูู:** `hero_slides` ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช

### ุจููุฉ ุงูุฌุฏูู:
```sql
CREATE TABLE hero_slides (
    id SERIAL PRIMARY KEY,
    image_url TEXT NOT NULL,  -- ูููู ุฃู ูููู: base64 data URLุ ุฑุงุจุท ุฎุงุฑุฌูุ ุฃู ูุณุงุฑ ูุญูู
    is_logo BOOLEAN DEFAULT FALSE,
    is_active BOOLEAN DEFAULT TRUE,
    display_order INTEGER DEFAULT 0,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

### ุฃููุงุน image_url ุงููุฏุนููุฉ:
1. **Base64 Data URL** (ูุซู: `data:image/jpeg;base64,/9j/4AAQ...`)
   - ูุชู ุญูุธูุง ูุจุงุดุฑุฉ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
   - ูููุฏุฉ ููุตูุฑ ุงูุตุบูุฑุฉ/ุงููุชูุณุทุฉ
   - ูุง ุชุญุชุงุฌ ูุธุงู ูููุงุช

2. **ุฑุงุจุท ุฎุงุฑุฌู** (ูุซู: `https://example.com/image.jpg`)
   - ูุชู ุญูุธ ุงูุฑุงุจุท ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
   - ุงูุตูุฑุฉ ููุฌูุฏุฉ ุนูู ุฎุงุฏู ุฎุงุฑุฌู

3. **ูุณุงุฑ ูุญูู** (ูุซู: `/hero-slides/slide-1.jpg`)
   - ุงูุตูุฑุฉ ููุฌูุฏุฉ ูู `frontend/public/hero-slides/`
   - ูุชู ุชูุฏูููุง ูู static files

---

## 2. Fallback: ุงูุณูุงูุฏุงุช ุงููุญููุฉ

### ุงููููุน ูู ุงูููุฏ:
**ุงูููู:** `frontend/src/pages/Home.tsx`

```typescript
const defaultSlides: HeroSlide[] = [
  {
    id: -1, // ID ุณุงูุจ ููุชูููุฒ
    image_url: '/logo.jpg',
    is_logo: true,
    is_active: true,
    display_order: 0
  }
]
```

### ุงูุบุฑุถ:
- **ุถูุงู ุงูุนุฑุถ ุงูููุฑู:** ุชุธูุฑ ุงูุณูุงูุฏุงุช ุงููุญููุฉ ููุฑุงู ุญุชู ูู ูุดู ุงูุงุชุตุงู ุจูุงุนุฏุฉ ุงูุจูุงูุงุช
- **ุชุฌุฑุจุฉ ูุณุชุฎุฏู ุฃูุถู:** ูุง ุชูุฌุฏ ุดุงุดุฉ ูุงุฑุบุฉ ุฃุซูุงุก ุงูุชุญููู
- **ุงูููุบู ุฏุงุฆูุงู:** ุงูููุบู (`logo.jpg`) ูุธูุฑ ุฏุงุฆูุงู ูุณูุงูุฏุฉ ุฃููู

---

## 3. ุขููุฉ ุงูุฏูุฌ (Merging Logic)

### ูู `Home.tsx` - ุฏุงูุฉ `loadHeroSlides()`:

```typescript
// 1. ุชุญููู ุงูุณูุงูุฏุงุช ูู API
const response = await heroSlidesAPI.getAll(true) // ููุท ุงููุดุทุฉ

// 2. ุงูุจุฏุก ุจุงูุณูุงูุฏุงุช ุงููุญููุฉ
let allSlides: HeroSlide[] = [...defaultSlides]

// 3. ุฅุถุงูุฉ ุงูุณูุงูุฏุงุช ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
if (response.data.slides && response.data.slides.length > 0) {
  const validSlides = response.data.slides.filter(slide => 
    slide.image_url && 
    slide.is_active === true
  )
  
  // 4. ุงูุฏูุฌ ูุงูุชุฑุชูุจ
  allSlides = [...defaultSlides, ...validSlides].sort((a, b) => {
    // ุงูููุบู ุฏุงุฆูุงู ุฃููุงู
    if (a.is_logo && !b.is_logo) return -1
    if (!a.is_logo && b.is_logo) return 1
    // ุซู ุญุณุจ display_order
    return a.display_order - b.display_order
  })
}

// 5. ูู ุญุงูุฉ ูุดู APIุ ุงุณุชุฎุฏุงู ุงูุณูุงูุฏุงุช ุงููุญููุฉ ููุท
setHeroSlides(allSlides)
```

### ุชุฑุชูุจ ุงูุนุฑุถ:
1. **ุงูููุบู** (`is_logo = true`) - ุฏุงุฆูุงู ุฃููุงู
2. **ุญุณุจ `display_order`** - ุชุฑุชูุจ ุชุตุงุนุฏู
3. **ุญุณุจ `id`** - ูู ุญุงูุฉ ุชุณุงูู display_order

---

## 4. ุฅุฏุงุฑุฉ ุงูุณูุงูุฏุงุช (Dashboard)

### ุตูุญุฉ ุงูุฅุฏุงุฑุฉ:
**ุงูููู:** `frontend/src/pages/Dashboard/HeroSlidesManagement.tsx`

### ุงููููุฒุงุช:
- โ ุนุฑุถ ุฌููุน ุงูุณูุงูุฏุงุช
- โ ุฅุถุงูุฉ ุณูุงูุฏุฉ ุฌุฏูุฏุฉ
- โ ุชุนุฏูู ุณูุงูุฏุฉ ููุฌูุฏุฉ
- โ ุญุฐู ุณูุงูุฏุฉ
- โ ุฑูุน ุตูุฑุฉ (ุชูุญูุธ ูู base64 ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช)
- โ ุฅุนุงุฏุฉ ุชุฑุชูุจ ุงูุณูุงูุฏุงุช (drag & drop)
- โ ุชูุนูู/ุชุนุทูู ุณูุงูุฏุฉ

### ุฑูุน ุงูุตูุฑ:
- **Endpoint:** `POST /api/hero-slides/upload`
- **ุงููุชูุฌุฉ:** ูุชู ุชุญููู ุงูุตูุฑุฉ ุฅูู base64 data URL
- **ุงูุญูุธ:** ูุชู ุญูุธ data URL ูุจุงุดุฑุฉ ูู `image_url` ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
- **ุงูุถุบุท:** ุงูุตูุฑ ุงููุจูุฑุฉ (>2MB) ูุชู ุถุบุทูุง ุชููุงุฆูุงู

---

## 5. ุชุฏูู ุงูุจูุงูุงุช (Data Flow)

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                    ูุงุนุฏุฉ ุงูุจูุงูุงุช                        โ
โ  hero_slides table (image_url, is_active, display_order)โ
โโโโโโโโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                     โ
                     โ API Call
                     โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ              Backend API (hero_slides.py)                โ
โ  GET /api/hero-slides?is_active=true                     โ
โโโโโโโโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                     โ
                     โ JSON Response
                     โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ            Frontend API (heroSlidesAPI.getAll)           โ
โ  frontend/src/lib/api.ts                                 โ
โโโโโโโโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                     โ
                     โ Response Data
                     โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ              Home.tsx (loadHeroSlides)                   โ
โ  1. ุชุญููู ูู API                                         โ
โ  2. ุฏูุฌ ูุน defaultSlides (ุงููุญููุฉ)                       โ
โ  3. ุชุฑุชูุจ ุญุณุจ is_logo ู display_order                    โ
โโโโโโโโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                     โ
                     โ Merged Slides Array
                     โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ              HeroSlider Component                        โ
โ  frontend/src/components/HeroSlider.tsx                  โ
โ  - ุนุฑุถ ุงูุณูุงูุฏุงุช                                        โ
โ  - ุงูุชููู ุจูู ุงูุณูุงูุฏุงุช                                 โ
โ  - Auto-play                                            โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

## 6. ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก (Error Handling)

### Retry Logic:
```typescript
const maxRetries = 3
// ุฅุนุงุฏุฉ ุงููุญุงููุฉ ุญุชู 3 ูุฑุงุช ูุน exponential backoff
```

### Fallback Strategy:
1. **ุงููุญุงููุฉ ุงูุฃููู:** ุฌูุจ ูู API
2. **ูู ุญุงูุฉ ุงููุดู:** ุฅุนุงุฏุฉ ุงููุญุงููุฉ (ุญุชู 3 ูุฑุงุช)
3. **ูู ุญุงูุฉ ุงููุดู ุงููุงูู:** ุงุณุชุฎุฏุงู ุงูุณูุงูุฏุงุช ุงููุญููุฉ ููุท

### Logging:
- ูู ูุถุน ุงูุชุทููุฑ (`DEV`): ูุชู ุทุจุงุนุฉ ูุนูููุงุช ููุตูุฉ ุนู ุงูุณูุงูุฏุงุช
- ูู ุงูุฅูุชุงุฌ: ูุชู ุชุณุฌูู ุงูุฃุฎุทุงุก ููุท

---

## 7. ุงูุชูุตูุงุช

### โ ุงููููุฒุงุช ุงูุญุงููุฉ:
- ูุธุงู ูุฌูู ููุซูู (ูุงุนุฏุฉ ุจูุงูุงุช + fallback)
- ุนุฑุถ ููุฑู ุจุฏูู ุงูุชุธุงุฑ
- ุฅุฏุงุฑุฉ ุณููุฉ ูู Dashboard
- ุฏุนู ุฃููุงุน ูุชุนุฏุฏุฉ ูู ุงูุตูุฑ (base64ุ ุฎุงุฑุฌูุ ูุญูู)

### ๐ ุชุญุณููุงุช ูุญุชููุฉ:
1. **Caching:** ุฅุถุงูุฉ cache ููุตูุฑ ูุชูููู ุงุณุชุฏุนุงุกุงุช API
2. **Lazy Loading:** ุชุญููู ุงูุตูุฑ ุนูุฏ ุงูุญุงุฌุฉ ููุท
3. **Image Optimization:** ุถุบุท ุชููุงุฆู ูุฌููุน ุงูุตูุฑ
4. **CDN:** ุงุณุชุฎุฏุงู CDN ููุตูุฑ ุงูุฎุงุฑุฌูุฉ

---

## 8. ุฃูุซูุฉ ุงูุงุณุชุฎุฏุงู

### ุฅุถุงูุฉ ุณูุงูุฏุฉ ุฌุฏูุฏุฉ ูู Dashboard:
1. ุงุฐูุจ ุฅูู `/dashboard/hero-slides`
2. ุงุถุบุท "ุฅุถุงูุฉ ุณูุงูุฏุฉ ุฌุฏูุฏุฉ"
3. ุงุฑูุน ุตูุฑุฉ ุฃู ุฃุฏุฎู ุฑุงุจุท
4. ุญุฏุฏ `display_order` ููุชุฑุชูุจ
5. ุงุญูุธ

### ุฅุถุงูุฉ ุณูุงูุฏุฉ ูุญููุฉ (ูู ุงูููุฏ):
```typescript
// ูู frontend/src/pages/Home.tsx
const defaultSlides: HeroSlide[] = [
  {
    id: -1,
    image_url: '/logo.jpg',
    is_logo: true,
    is_active: true,
    display_order: 0
  },
  {
    id: -2, // ID ุณุงูุจ ุฌุฏูุฏ
    image_url: '/hero-slides/slide-1.jpg', // ุถุน ุงูุตูุฑุฉ ูู public/hero-slides/
    is_logo: false,
    is_active: true,
    display_order: 1
  }
]
```

---

## ุงูุฎูุงุตุฉ

**ุงููุธุงู ุงูุญุงูู:**
- โ **ุงููุตุฏุฑ ุงูุฃุณุงุณู:** ูุงุนุฏุฉ ุงูุจูุงูุงุช (ูุฑู ููุงุจู ููุฅุฏุงุฑุฉ)
- โ **Fallback:** ุงูุณูุงูุฏุงุช ุงููุญููุฉ (ููุซูููุฉ ุนุงููุฉ)
- โ **ุงูุฏูุฌ:** ุชููุงุฆู ููุฑุชุจ
- โ **ุงูุฅุฏุงุฑุฉ:** ูู Dashboard ุจุณูููุฉ

**ุงููุชูุฌุฉ:** ูุธุงู ูุชูู ูููุฑ ูุฑููุฉ ูู ุงูุฅุฏุงุฑุฉ ูููุซูููุฉ ูู ุงูุนุฑุถ.

